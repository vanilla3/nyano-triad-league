# Nyano Triad League — AI Opponent Spec v1（Draft, ja）

このドキュメントは「Nyano（AI）と対戦できる」機能を、イベント運用まで見据えて整理するものです。

---

## 1. ゴール
- **いつでも挑戦できる**：イベント期間中、運営の立会い不要で回る
- **共有と議論が起きる**：replay と turn-log で勝因/敗因を語れる
- **プロトコル互換**：結果は transcript で決定し、再現性が担保される

---

## 2. 前提
- 現時点の transcript は「9手確定」で1試合（placeholder は UI 都合）
- オンチェーン提出は将来導入（署名・手数料・UXを整えた後）

---

## 3. MVP（まず実装するAI）
### 3.1 役割
- **B側を AI が操作**（Deck B を “Nyano デッキ” と見なす）

### 3.2 実装方針
- クライアント実装（サーバ不要）
- 決定論（同じ盤面なら同じ手を返す）
- 事故らない（ルール違反の手を生成しない）

### 3.3 Difficulty
- Easy：最小手（cell最小 + cardIndex最小）
- Normal：即時 flip 数が最大になる手を選択（同点は edgeSum でタイブレーク）

---

## 4. 共有と検証
- AI戦も **transcript を共有**すれば Replay で検証できる
- AIのアルゴリズムが変わっても、**過去の試合は transcript で再現**できる（互換性が高い）

---

## 5. 将来：オンチェーンイベントにするための論点
AIとオンチェーン提出を両立させるには「B側の同意/署名」をどう扱うかが論点。

- 案A：AIはオフチェーン専用（提出はしない）  
  → 運用が簡単。ランキングは off-chain 集計で実現。
- 案B：Nyano専用の “AIアカウント” を用意  
  - ERC-6551 TBA が NyanoデッキNFTを保持（または委任）
  - ERC-1271 で署名相当を提供し、submit を許可する
  - ただし「誰が鍵を持つか」を極力排除した設計が必要

---

## 6. 受け入れ条件（MVP）
- Match 画面で “Vs Nyano（AI）” を選べる
- Nyanoの手番が自動で進む（自動/手動切替）
- 9手確定後に share URL を生成し Replay で再現できる
