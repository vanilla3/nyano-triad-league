# Nyano Triad League Frontend ã‚¿ã‚¹ã‚¯ãƒœãƒ¼ãƒ‰ v1 (JA)

ä»–ä½œæ¥­è€…ã¸ä¾é ¼ã—ã‚„ã™ã„ã‚ˆã†ã«ã€ã‚¿ã‚¹ã‚¯ã‚’ã€Œç‹¬ç«‹æ€§ã€ã€Œå½±éŸ¿ç¯„å›²ã€ã€Œå—ã‘å…¥ã‚Œæ¡ä»¶ã€ã§åŒºåˆ‡ã£ã¦ã„ã¾ã™ã€‚
ï¼ˆâ€» â€œGood Firstâ€ ã¯æ¯”è¼ƒçš„å®‰å…¨ã«å–ã‚Šè¾¼ã‚ã‚‹ä½œæ¥­ã§ã™ï¼‰

---

## 0. ä½œæ¥­ãƒ«ãƒ¼ãƒ«ï¼ˆãŠé¡˜ã„ï¼‰
- **å¯¾è±¡ãƒšãƒ¼ã‚¸**ï¼š`/match`, `/replay`, `/stream`, `/overlay`
- PR/ã‚³ãƒŸãƒƒãƒˆå˜ä½ã¯ã€Œå°ã•ãã€ã€Œ1ãƒ†ãƒ¼ãƒã€ã§ãŠé¡˜ã„ã—ã¾ã™
- TypeScript/ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‹ã“ã¨ï¼ˆ`pnpm -C apps/web dev`ã€å¯èƒ½ãªã‚‰ `pnpm -C packages/triad-engine test`ï¼‰
- UIã¯ Tailwind ã®æ—¢å­˜ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆsurfaceç³»/btn/card ãªã©ï¼‰ã«å¯„ã›ã‚‹

---

## 1. Good Firstï¼ˆä½ãƒªã‚¹ã‚¯ãƒ»åŠ¹æœå¤§ï¼‰

### UI-01: Replay Auto Playï¼ˆplay/pause + speedï¼‰
- çŠ¶æ…‹: âœ… å®Ÿè£…æ¸ˆï¼ˆã“ã®ã‚³ãƒŸãƒƒãƒˆï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«: `apps/web/src/pages/Replay.tsx`
- å—ã‘å…¥ã‚Œæ¡ä»¶:
  - play ã§ step ãŒè‡ªå‹•çš„ã«é€²ã‚€
  - æ‰‹å‹•æ“ä½œï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼/â†â†’/resetï¼‰ã§è‡ªå‹•å†ç”ŸãŒæ­¢ã¾ã‚‹
  - speed ãŒ 0.5ã€œ3xã§åæ˜ ã•ã‚Œã‚‹

### UI-02: ScoreBarï¼ˆtilesA/B + ã‚¿ãƒ¼ãƒ³è¡¨ç¤ºï¼‰ã‚’ /match ã¨ /replay ã«å¸¸è¨­
- ç›®çš„: â€œã„ã¾ã©ã£ã¡ãŒå„ªå‹¢ã‹â€ ãŒä¸€ç¬ã§ã‚ã‹ã‚‹
- å¤‰æ›´å€™è£œ:
  - `apps/web/src/components/ScoreBar.tsx`ï¼ˆæ–°è¦ï¼‰
  - `/match` ã¨ `/replay` ã«é…ç½®
- å—ã‘å…¥ã‚Œæ¡ä»¶:
  - ç›¤é¢ä¸Šã« A/B ã® tile æ•°ãŒå¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹
  - 9æ‰‹å®Œäº†ã§ winner è¡¨ç¤ºãŒè‡ªç„¶ã«ã¤ãªãŒã‚‹

### UI-03: TurnLog ã®ãƒãƒƒã‚¸åŒ–ï¼ˆflipCount / comboEffect / warningMarkï¼‰
- ç›®çš„: ãƒ­ã‚°ãŒ â€œèª­ã‚€ã¨å¼·ããªã‚‹â€ ä½“é¨“ã«ãªã‚‹
- ãƒ•ã‚¡ã‚¤ãƒ«:
  - `apps/web/src/components/TurnLog.tsx`
- å—ã‘å…¥ã‚Œæ¡ä»¶:
  - flipCount ãŒ 0/1/2/3+ ã§è¦–èªã§ãã‚‹
  - comboEffect ãŒç™ºç”Ÿã—ãŸã‚¿ãƒ¼ãƒ³ãŒä¸€ç›®ã§ã‚ã‹ã‚‹ï¼ˆMOMENTUM/FEVERç­‰ï¼‰

---

## 2. High Impactï¼ˆå°‘ã—é›£ã—ã„ãŒä¾¡å€¤ãŒå¤§ãã„ï¼‰

### UI-10: FlipReasonBadgeï¼ˆãªãœãƒ•ãƒªãƒƒãƒ—ã—ãŸã‹ï¼‰
- å‰æ: `TurnSummary.flipTraces?: FlipTraceV1[]` ãŒä½¿ãˆã‚‹ã“ã¨ï¼ˆâœ… engine å´ã§å‡ºåŠ›æ¸ˆï¼‰
- å¤‰æ›´å€™è£œ:
  - `apps/web/src/components/FlipReasonBadge.tsx`ï¼ˆæ–°è¦ï¼‰
  - `TurnLog` ã« 1ã‚¿ãƒ¼ãƒ³å†…ã® flipTraces ã‚’è¡¨ç¤º
- å—ã‘å…¥ã‚Œæ¡ä»¶:
  - â€œã©ã®æ–¹å‘ã§â€â€œaVal vs dValâ€â€œtieBreakæœ‰ç„¡â€ ãŒèª­ã‚ã‚‹
  - chain ç”±æ¥ã‹ã©ã†ã‹ãŒåˆ†ã‹ã‚‹

### UI-11: Nyanoåå¿œï¼ˆè¡¨æƒ…å·®åˆ†ãªã—ã§æˆç«‹ï¼‰
- ç›®çš„: ç”»åƒãŒ1æšã§ã‚‚ â€œNyanoãŒç”Ÿãã¦ã„ã‚‹æ„Ÿâ€ ã‚’å‡ºã™
- æ‰‹æ®µï¼ˆã‚¢ã‚»ãƒƒãƒˆä¸è¦ï¼‰:
  - glow è‰²ï¼ˆchain/fever/win/loseï¼‰
  - ãƒãƒƒã‚¸ï¼ˆâš¡ğŸ”¥âœ¦ï¼‰
  - å¹ãå‡ºã—ãƒ†ã‚­ã‚¹ãƒˆ
- å¤‰æ›´å€™è£œ:
  - `apps/web/src/components/NyanoImage.tsx` ã¸ `mood` ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ 
  - ã¾ãŸã¯ `NyanoMoodBadge.tsx` æ–°è¦
- å—ã‘å…¥ã‚Œæ¡ä»¶:
  - çŠ¶æ…‹ã«å¿œã˜ã¦è¦–è¦šå¤‰åŒ–ãŒèµ·ãã‚‹ï¼ˆéå‰°ã«ç‚¹æ»…ã—ãªã„ï¼‰

---

## 3. é…ä¿¡é€£æºï¼ˆnyano-warudoï¼‰ç³»

### STREAM-01: state_json ã‚’æŠ•ç¥¨é–‹å§‹æ™‚ç‚¹ã§ã‚‚é€ã‚‹
- ç›®çš„: nyano-warudo ã® strictAllowed ãŒæŠ•ç¥¨ä¸­ãšã£ã¨ã‚ºãƒ¬ãªã„
- å¯¾è±¡: `apps/web/src/pages/Stream.tsx`
- å—ã‘å…¥ã‚Œæ¡ä»¶:
  - æŠ•ç¥¨é–‹å§‹æ™‚ã« `POST /v1/snapshots` kind=state_json ãŒå¿…ãšé€ã‚‰ã‚Œã‚‹
  - state_json ã« strictAllowed allowlist ãŒå«ã¾ã‚Œã‚‹/æ›´æ–°ã•ã‚Œã‚‹

### STREAM-02: è¦–è´è€…ææ¡ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ç¢ºå®šï¼ˆæ­£è¦è¡¨ç¾ + UIï¼‰
- ç›®çš„: è’ã‚Œãªã„è¦–è´è€…å‚åŠ 
- å¤‰æ›´å€™è£œ:
  - ææ¡ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¾‹: `#triad A2->B2` ã¾ãŸã¯ `#triad 4:1` ç­‰
  - `Stream.tsx` ã« â€œä¾‹â€ ã‚’å¸¸è¨­è¡¨ç¤º
- å—ã‘å…¥ã‚Œæ¡ä»¶:
  - ä¾‹ãŒå¸¸ã«è¦‹ãˆã‚‹
  - ä¸æ­£å½¢å¼ã¯å¼¾ã‘ã‚‹

---

## 4. è¿½åŠ ã§æ¬²ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå¿…è¦ã«ãªã‚Šã‚„ã™ã„ï¼‰
- `apps/web/src/lib/*`ï¼ˆç‰¹ã« `nyano_warudo` / `streamer_bus` / `nyano_rpc` / `transcript_import`ï¼‰
- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°/ã‚¨ãƒ³ãƒˆãƒª:
  - `apps/web/src/main.tsx` / `apps/web/src/router.tsx` ç›¸å½“
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆï¼ˆ4ç”»é¢ï¼‰:
  - /match /replay /stream /overlay ã®ç¾çŠ¶1æšãšã¤
