/* ═══════════════════════════════════════════════════════════════════════════
   Nyano Triad League — Mint Theme (Nintendo UX)

   Usage: import in BoardViewMint.tsx

   Adds:
   - CSS custom properties for Mint color palette
   - Keyframe animations: breathe, glow, pop-in, shake
   - .mint-* utility classes for board, cells, cards, HUD, prompt, overlay
   - Reduced motion support
   ═══════════════════════════════════════════════════════════════════════════ */

/* ── Mint Custom Properties ──────────────────────────────────────────── */

:root {
  /* Surface */
  --mint-bg: #EFF8FF;
  --mint-surface: #FFFFFF;
  --mint-surface-dim: #E8F6FF;

  /* Accent */
  --mint-accent: #38BDF8;
  --mint-accent-light: #7DD3FC;
  --mint-accent-dark: #0284C7;
  --mint-accent-muted: #BAE6FD;

  /* Cell */
  --mint-cell-active: #BAE6FD;
  --mint-cell-active-glow: rgba(56, 189, 248, 0.35);
  --mint-cell-flat: #DAEAF6;
  --mint-cell-flat-dark: #C4D9E8;
  --mint-cell-selected: rgba(56, 189, 248, 0.42);

  /* Player A (Sky) */
  --mint-pa: #0EA5E9;
  --mint-pa-light: #38BDF8;
  --mint-pa-glow: rgba(14, 165, 233, 0.4);
  --mint-pa-bg: rgba(14, 165, 233, 0.08);

  /* Player B (Rose) */
  --mint-pb: #F43F5E;
  --mint-pb-light: #FB7185;
  --mint-pb-glow: rgba(244, 63, 94, 0.4);
  --mint-pb-bg: rgba(244, 63, 94, 0.08);

  /* Events */
  --mint-flip: #F59E0B;
  --mint-flip-glow: rgba(245, 158, 11, 0.4);
  --mint-chain: #8B5CF6;
  --mint-chain-glow: rgba(139, 92, 246, 0.4);

  /* Text */
  --mint-text-primary: #1F2937;
  --mint-text-secondary: #4B5563;
  --mint-text-hint: #9CA3AF;
  --mint-text-accent: #0284C7;

  /* Feedback */
  --mint-error: #F87171;
  --mint-error-bg: rgba(248, 113, 113, 0.1);
  --mint-warning-bg: rgba(251, 191, 36, 0.15);

  /* Prompt */
  --mint-prompt-bg: rgba(239, 249, 255, 0.95);
  --mint-prompt-border: rgba(125, 211, 252, 0.6);

  /* Motion tokens (WO-006) */
  --mint-motion-duration-fast: 120ms;
  --mint-motion-duration-ui: 170ms;
  --mint-motion-duration-md: 200ms;
  --mint-motion-duration-pop: 260ms;
  --mint-motion-ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --mint-motion-ease-pop: cubic-bezier(0.34, 1.56, 0.64, 1);
  --mint-motion-press-scale: 0.98;
  --mint-motion-hover-lift: -1px;
  --mint-focus-toolbar-hit-size: 34px;
  --mint-focus-toolbar-hit-size-coarse: 44px;
  --mint-focus-toolbar-hit-radius: 10px;

  /* Z-depth tokens: sink -> float -> overlay */
  --mint-z-base: 0;
  --mint-z-floating: 8;
  --mint-z-announcer: 24;
  --mint-z-overlay-backdrop: 80;
  --mint-z-overlay: 90;
  --mint-z-result-overlay: 100;
}


/* ── Pressable / Hit Target Utilities (WO-043, WO-006) ─────────────── */

.mint-hit {
  min-width: 44px;
  min-height: 44px;
}

.mint-pressable {
  transition-property: transform, box-shadow, border-color, background-color, color, opacity, filter;
  transition-duration: var(--mint-motion-duration-ui);
  transition-timing-function: var(--mint-motion-ease-standard);
  transform: translateZ(0);
  will-change: transform;
}

.mint-pressable:hover:not(:disabled):not([aria-disabled="true"]) {
  transform: translateY(var(--mint-motion-hover-lift));
}

.mint-pressable:active:not(:disabled):not([aria-disabled="true"]),
.mint-pressable[data-pressed="true"] {
  transform: translateY(0) scale(var(--mint-motion-press-scale));
  transition-duration: var(--mint-motion-duration-fast);
}

.mint-pressable[data-press-ack="true"] {
  transition-duration: 0ms;
  box-shadow:
    0 0 0 2px rgba(125, 211, 252, 0.36),
    0 6px 18px -14px rgba(14, 116, 144, 0.9),
    inset 0 1px 0 rgba(255, 255, 255, 0.72);
  filter: saturate(1.05);
}

.mint-pressable:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.28), 0 0 0 1px rgba(125, 211, 252, 0.6);
}

.mint-pressable:disabled,
.mint-pressable[aria-disabled="true"],
.mint-ui-pressable--disabled {
  pointer-events: none;
  cursor: not-allowed;
  opacity: 0.62;
  transform: none;
  filter: saturate(0.78);
  box-shadow: none;
}

.mint-ui-pressable {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.45rem;
  border-radius: 12px;
  border: 1px solid rgba(125, 211, 252, 0.5);
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.92), rgba(238, 250, 255, 0.76));
  color: #0f4c6b;
  font-family: "Nunito", system-ui, sans-serif;
  font-weight: 700;
  text-decoration: none;
  box-shadow:
    0 10px 20px -16px rgba(14, 116, 144, 0.7),
    inset 0 1px 0 rgba(255, 255, 255, 0.7);
}

.mint-ui-pressable--sm {
  padding: 0.45rem 0.72rem;
  border-radius: 10px;
  font-size: 0.75rem;
  line-height: 1.1;
}

.mint-ui-pressable--md {
  padding: 0.56rem 0.9rem;
  font-size: 0.875rem;
  line-height: 1.2;
}

.mint-ui-pressable--lg {
  padding: 0.7rem 1.05rem;
  border-radius: 14px;
  font-size: 0.95rem;
  line-height: 1.2;
}

.mint-ui-pressable--full {
  width: 100%;
}

.mint-ui-pressable--default {
  border-color: rgba(125, 211, 252, 0.52);
  color: #0f4c6b;
}

.mint-ui-pressable--primary {
  border-color: rgba(14, 165, 233, 0.55);
  background: linear-gradient(160deg, rgba(56, 189, 248, 0.94), rgba(2, 132, 199, 0.9));
  color: #f8fdff;
}

.mint-ui-pressable--soft {
  border-color: rgba(125, 211, 252, 0.52);
  background: linear-gradient(160deg, rgba(240, 249, 255, 0.96), rgba(232, 246, 255, 0.92));
  color: #0f4c6b;
}

.mint-ui-pressable--ghost {
  border-color: rgba(125, 211, 252, 0.36);
  background: rgba(255, 255, 255, 0.55);
  color: #0f4c6b;
  box-shadow:
    0 8px 16px -14px rgba(15, 23, 42, 0.38),
    inset 0 1px 0 rgba(255, 255, 255, 0.55);
}

.mint-ui-pressable--danger {
  border-color: rgba(244, 63, 94, 0.5);
  background: linear-gradient(160deg, rgba(251, 113, 133, 0.94), rgba(225, 29, 72, 0.9));
  color: #fff7fb;
}


/* ── Keyframe Animations ─────────────────────────────────────────────── */

@keyframes mint-breathe {
  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(56, 189, 248, 0); }
  50% { transform: scale(1.02); box-shadow: 0 0 12px 2px rgba(56, 189, 248, 0.26); }
}

@keyframes mint-glow-pulse {
  0%, 100% { box-shadow: 0 0 8px rgba(56, 189, 248, 0.28); }
  50% { box-shadow: 0 0 20px rgba(56, 189, 248, 0.5); }
}

@keyframes mint-pop-in {
  0% { transform: scale(0.7); opacity: 0; }
  70% { transform: scale(1.05); opacity: 1; }
  100% { transform: scale(1); }
}

@keyframes mint-error-shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-3px); }
  40%, 80% { transform: translateX(3px); }
}

@keyframes mint-slide-up {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes mint-fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

/* Card placement: dramatic slam-down with bounce + flash */
@keyframes mint-cell-place {
  0%   { transform: scale(0.5) translateY(-16px); opacity: 0; filter: brightness(1); }
  30%  { transform: scale(1.12) translateY(0); opacity: 1; filter: brightness(1.4); }
  50%  { transform: scale(0.96); filter: brightness(1.1); }
  70%  { transform: scale(1.04); filter: brightness(1); }
  100% { transform: scale(1); filter: brightness(1); }
}

/* Card flip: full 360 rotation with color burst */
@keyframes mint-cell-flip {
  0%   { transform: rotateY(0deg) scale(1); filter: brightness(1); }
  25%  { transform: rotateY(90deg) scale(1.06); filter: brightness(0.7); }
  50%  { transform: rotateY(180deg) scale(1.08); filter: brightness(1.5); }
  75%  { transform: rotateY(270deg) scale(1.04); filter: brightness(1.2); }
  100% { transform: rotateY(360deg) scale(1); filter: brightness(1); }
}

/* Shockwave ripple for placed cells */
@keyframes mint-place-ripple {
  0%   { transform: scale(0.8); opacity: 0.6; }
  100% { transform: scale(2.2); opacity: 0; }
}

/* Glow burst for flipped cells */
@keyframes mint-flip-burst {
  0%   { box-shadow: 0 0 0 0 var(--mint-chain-glow); }
  50%  { box-shadow: 0 0 24px 8px var(--mint-chain-glow); }
  100% { box-shadow: 0 0 12px 2px var(--mint-chain-glow); }
}

/* ── Board Frame ─────────────────────────────────────────────────────── */

.mint-board-frame {
  position: relative;
  background:
    radial-gradient(circle at 18% 10%, rgba(255, 255, 255, 0.96), rgba(233, 247, 255, 0.88) 42%, rgba(186, 230, 253, 0.6) 100%),
    linear-gradient(160deg, #f8fdff 0%, #dbf2ff 58%, #c4e8ff 100%);
  border: 2px solid rgba(125, 211, 252, 0.72);
  border-radius: 24px;
  padding: 16px;
  box-shadow:
    0 16px 38px -22px rgba(14, 165, 233, 0.58),
    inset 0 1px 0 rgba(255, 255, 255, 0.9),
    inset 0 -1px 0 rgba(14, 116, 144, 0.08);
}

.mint-board-frame::before {
  content: "";
  position: absolute;
  inset: 8px;
  border-radius: 18px;
  border: 1px solid rgba(255, 255, 255, 0.7);
  pointer-events: none;
}

.mint-board-frame::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background:
    radial-gradient(circle at 78% 16%, rgba(255, 255, 255, 0.5), transparent 38%),
    radial-gradient(circle at 24% 82%, rgba(125, 211, 252, 0.2), transparent 42%);
  pointer-events: none;
  mix-blend-mode: screen;
}

.mint-board-inner {
  position: relative;
  background:
    radial-gradient(circle at 18% 8%, rgba(255, 255, 255, 0.72), transparent 46%),
    linear-gradient(155deg, rgba(239, 249, 255, 0.9), rgba(219, 234, 254, 0.82)),
    url('/board-bg.webp');
  background-size: cover, cover, cover;
  background-position: center, center, center;
  background-blend-mode: screen, screen, normal;
  border-radius: 18px;
  padding: 12px;
  border: 1px solid rgba(125, 211, 252, 0.52);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.7),
    inset 0 -12px 24px rgba(2, 132, 199, 0.08),
    0 16px 30px -24px rgba(14, 116, 144, 0.52);
  overflow: hidden;
}

.mint-board-inner::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    linear-gradient(135deg, rgba(255, 255, 255, 0.16), transparent 35%),
    linear-gradient(315deg, rgba(14, 165, 233, 0.12), transparent 48%);
}

.mint-board-inner::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 74% 20%, rgba(255, 255, 255, 0.18), transparent 30%),
    repeating-linear-gradient(
      120deg,
      rgba(255, 255, 255, 0.045) 0px,
      rgba(255, 255, 255, 0.045) 5px,
      transparent 5px,
      transparent 24px
    );
  opacity: 0.5;
}


/* ── Grid ─────────────────────────────────────────────────────────────── */

.mint-grid {
  position: relative;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: clamp(8px, 1vw, 12px);
  padding: 1px;
  transform-style: preserve-3d;
  perspective: 900px;
}

.mint-grid::before {
  content: "";
  position: absolute;
  inset: -6px;
  pointer-events: none;
  border-radius: 16px;
  background:
    radial-gradient(circle at 50% 42%, rgba(125, 211, 252, 0.16), transparent 54%);
  filter: blur(10px);
  opacity: 0.66;
  z-index: 0;
}


/* ── Cell ─────────────────────────────────────────────────────────────── */

.mint-cell {
  position: relative;
  aspect-ratio: 1;
  border-radius: 16px;
  border: 2px solid var(--mint-cell-flat);
  background:
    radial-gradient(circle at 24% 16%, rgba(255, 255, 255, 0.58), transparent 38%),
    linear-gradient(168deg, rgba(255, 255, 255, 0.94), rgba(241, 245, 249, 0.86));
  overflow: hidden;
  transition:
    transform var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    box-shadow var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    border-color var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    background var(--mint-motion-duration-md) var(--mint-motion-ease-standard);
  display: flex;
  align-items: center;
  justify-content: center;
  perspective: 600px;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.72),
    inset 0 -1px 0 rgba(148, 163, 184, 0.26),
    0 8px 14px -10px rgba(15, 23, 42, 0.58);
  transform: translateZ(0);
  z-index: 1;
}

.mint-cell::before {
  content: "";
  position: absolute;
  inset: 1px;
  border-radius: 14px;
  pointer-events: none;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.24), transparent 44%),
    linear-gradient(0deg, rgba(148, 163, 184, 0.09), transparent 42%);
  z-index: 1;
}

/* Selectable (empty, interactive) — puffy + glow */
.mint-cell--selectable {
  cursor: pointer;
  border-color: var(--mint-accent-muted);
  background:
    radial-gradient(circle at 26% 14%, rgba(255, 255, 255, 0.66), transparent 34%),
    linear-gradient(135deg, rgba(239, 249, 255, 0.76), rgba(255, 255, 255, 0.56));
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  animation: mint-breathe 2.5s ease-in-out infinite;
  will-change: transform, box-shadow;
}

.mint-cell--selectable:hover {
  border-color: var(--mint-accent);
  box-shadow:
    0 0 18px var(--mint-cell-active-glow),
    0 12px 18px -12px rgba(14, 116, 144, 0.44);
  transform: translateY(-2px) scale(1.03);
}

.mint-cell--selectable:active {
  transform: translateY(0) scale(0.985);
}

.mint-cell--drop-ready {
  border-style: dashed;
  border-width: 2px;
  border-color: rgba(56, 189, 248, 0.72);
  box-shadow:
    0 0 0 1px rgba(56, 189, 248, 0.35) inset,
    0 0 18px rgba(56, 189, 248, 0.28),
    0 10px 18px -14px rgba(14, 116, 144, 0.5);
}

.mint-cell--drop-ready .mint-cell__empty-label {
  color: #0ea5e9;
  font-weight: 700;
}

/* Flat (empty, non-interactive) — sunken, semi-transparent on board bg */
.mint-cell--flat {
  cursor: default;
  border-color: rgba(148, 163, 184, 0.3);
  background:
    linear-gradient(180deg, rgba(248, 250, 252, 0.28), rgba(226, 232, 240, 0.22));
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}

/* Selected */
.mint-cell--selected {
  border-color: var(--mint-accent) !important;
  box-shadow:
    0 0 0 3px var(--mint-cell-selected),
    0 0 18px var(--mint-cell-active-glow),
    0 12px 20px -14px rgba(14, 116, 144, 0.46) !important;
  transform: translateY(-1px);
  animation: mint-glow-pulse 2s ease-in-out infinite !important;
}

/* Placed (just placed) — dramatic slam with ripple ring */
.mint-cell--placed {
  animation: mint-cell-place 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards !important;
  border-color: var(--mint-flip) !important;
  box-shadow:
    0 0 20px var(--mint-flip-glow),
    0 0 4px rgba(245, 158, 11, 0.6),
    0 14px 20px -14px rgba(120, 53, 15, 0.5),
    inset 0 0 8px rgba(245, 158, 11, 0.15) !important;
}
.mint-cell--placed::after {
  content: '';
  position: absolute;
  inset: -4px;
  border-radius: 18px;
  border: 2px solid var(--mint-flip);
  animation: mint-place-ripple 0.6s ease-out forwards;
  pointer-events: none;
}

/* Flipped — dramatic rotation with glow burst */
.mint-cell--flipped {
  animation: mint-cell-flip 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards,
             mint-flip-burst 0.6s ease-out forwards !important;
  border-color: var(--mint-chain) !important;
  box-shadow:
    0 0 18px rgba(139, 92, 246, 0.36),
    0 12px 20px -14px rgba(76, 29, 149, 0.46),
    inset 0 0 8px rgba(139, 92, 246, 0.14);
}

/* Stagger flip delays — wider stagger for dramatic cascade */
.mint-cell--flip-delay-1 { animation-delay: 0.2s !important; }
.mint-cell--flip-delay-2 { animation-delay: 0.4s !important; }
.mint-cell--flip-delay-3 { animation-delay: 0.6s !important; }

/* Owner tints */
.mint-cell--owner-a {
  border-color: var(--mint-pa);
  background:
    radial-gradient(circle at 22% 12%, rgba(224, 242, 254, 0.44), transparent 36%),
    var(--mint-pa-bg);
  box-shadow:
    inset 0 1px 0 rgba(224, 242, 254, 0.72),
    0 10px 16px -12px rgba(14, 165, 233, 0.65),
    0 0 0 1px rgba(56, 189, 248, 0.12);
}

.mint-cell--owner-b {
  border-color: var(--mint-pb);
  background:
    radial-gradient(circle at 22% 12%, rgba(255, 228, 230, 0.42), transparent 36%),
    var(--mint-pb-bg);
  box-shadow:
    inset 0 1px 0 rgba(255, 228, 230, 0.72),
    0 10px 16px -12px rgba(244, 63, 94, 0.6),
    0 0 0 1px rgba(251, 113, 133, 0.11);
}

/* Focus ring (replay) */
.mint-cell--focus {
  box-shadow:
    0 0 0 2px var(--mint-accent),
    0 0 0 4px rgba(56, 189, 248, 0.24),
    0 0 16px rgba(56, 189, 248, 0.28);
}

/* Coordinate label */
.mint-cell__coord {
  position: absolute;
  top: 2px;
  left: 4px;
  font-size: 8px;
  font-family: 'JetBrains Mono', monospace;
  color: var(--mint-text-hint);
  opacity: 0.5;
  pointer-events: none;
  z-index: 2;
}

/* Warning mark */
.mint-cell__warning {
  position: absolute;
  top: 3px;
  right: 3px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  font-weight: 800;
  color: white;
  z-index: 5;
}

.mint-cell__warning--a { background: var(--mint-pa); }
.mint-cell__warning--b { background: var(--mint-pb); }

/* Empty cell label */
.mint-cell__empty-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--mint-text-hint);
  user-select: none;
}

.mint-cell--selectable .mint-cell__empty-label {
  color: var(--mint-text-accent);
}


/* ── Score Bar ────────────────────────────────────────────────────────── */

.mint-scorebar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  border-radius: 16px;
  background: var(--mint-surface);
  border: 1px solid var(--mint-accent-muted);
  box-shadow: 0 2px 8px -2px rgba(56, 189, 248, 0.16);
}

.mint-scorebar__player {
  display: flex;
  align-items: center;
  gap: 8px;
}

.mint-scorebar__dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

.mint-scorebar__dot--a { background: var(--mint-pa); box-shadow: 0 0 6px var(--mint-pa-glow); }
.mint-scorebar__dot--b { background: var(--mint-pb); box-shadow: 0 0 6px var(--mint-pb-glow); }

.mint-scorebar__label {
  font-size: 13px;
  font-weight: 700;
  font-family: 'Nunito', sans-serif;
}

.mint-scorebar__label--a { color: var(--mint-pa); }
.mint-scorebar__label--b { color: var(--mint-pb); }

.mint-scorebar__count {
  font-size: 13px;
  font-weight: 600;
  font-family: 'JetBrains Mono', monospace;
  color: var(--mint-text-primary);
}

.mint-scorebar__turn {
  font-size: 12px;
  color: var(--mint-text-hint);
}


/* ── Action Prompt (NIN-UX-011) ──────────────────────────────────────── */

.mint-prompt {
  padding: 10px 16px;
  border-radius: 14px;
  background: var(--mint-prompt-bg);
  border: 1.5px solid var(--mint-prompt-border);
  backdrop-filter: blur(8px);
  animation: mint-slide-up 0.3s ease-out;
  text-align: center;
}

.mint-prompt__text {
  font-size: 14px;
  font-weight: 600;
  font-family: 'Nunito', sans-serif;
  color: var(--mint-text-primary);
}

.mint-prompt__text--ai {
  color: var(--mint-text-hint);
  font-style: italic;
}

/* Warning mode prompt */
.mint-prompt--warning {
  background: var(--mint-warning-bg);
  border-color: rgba(251, 191, 36, 0.4);
}


/* ── Inline Error (NIN-UX-012) ───────────────────────────────────────── */

.mint-error-pill {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 6px 14px;
  border-radius: 20px;
  background: var(--mint-error-bg);
  border: 1px solid rgba(248, 113, 113, 0.3);
  font-size: 13px;
  font-weight: 500;
  color: var(--mint-error);
  animation: mint-error-shake 0.4s ease-in-out, mint-fade-in 0.2s ease-out;
}

.mint-error-pill__icon {
  font-size: 14px;
}


/* ── Hand Card ────────────────────────────────────────────────────────── */

.mint-hand {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  padding: 6px 0;
}

.mint-hand-card {
  position: relative;
  width: 82px;
  aspect-ratio: 3 / 4;
  border-radius: 16px;
  border: 2px solid var(--mint-cell-flat);
  background: var(--mint-surface);
  padding: 4px;
  cursor: pointer;
  transition:
    transform var(--mint-motion-duration-md) var(--mint-motion-ease-pop),
    box-shadow var(--mint-motion-duration-md) var(--mint-motion-ease-pop),
    border-color var(--mint-motion-duration-md) var(--mint-motion-ease-pop),
    filter var(--mint-motion-duration-md) var(--mint-motion-ease-pop);
  flex-shrink: 0;
  /* Subtle depth even at rest */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
}

.mint-hand-card--draggable {
  cursor: grab;
}

.mint-hand-card--draggable:active {
  cursor: grabbing;
}

.mint-hand-card:hover:not(.mint-hand-card--used) {
  transform: translateY(-6px) scale(1.03);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.06);
}

.mint-hand-card--a { border-color: rgba(14, 165, 233, 0.35); }
.mint-hand-card--b { border-color: rgba(244, 63, 94, 0.35); }

.mint-hand-card--selected {
  transform: translateY(-8px) scale(1.04) !important;
  border-color: var(--mint-accent) !important;
  animation: mint-card-select-glow 1.5s ease-in-out infinite;
}

.mint-hand-card--a.mint-hand-card--selected {
  --mint-select-ring: var(--mint-pa, #0EA5E9);
  --mint-select-glow: var(--mint-pa-glow, rgba(14, 165, 233, 0.4));
}

.mint-hand-card--b.mint-hand-card--selected {
  --mint-select-ring: var(--mint-pb, #F43F5E);
  --mint-select-glow: var(--mint-pb-glow, rgba(244, 63, 94, 0.4));
}

.mint-hand-card--used {
  opacity: 0.3;
  transform: scale(0.88);
  pointer-events: none;
  filter: grayscale(0.6);
}

.mint-hand-card__slot {
  position: absolute;
  top: -7px;
  right: -7px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 800;
  color: white;
  z-index: 5;
  border: 2px solid var(--mint-surface);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
}

.mint-hand-card__slot--a { background: var(--mint-pa); }
.mint-hand-card__slot--b { background: var(--mint-pb); }

/* ── Focus Hand Rail (Engine Focus / Stage) ─────────────────────────── */

@keyframes mint-focus-hand-sheen {
  0% {
    transform: translateX(-118%);
    opacity: 0;
  }
  16% {
    opacity: 0.4;
  }
  34% {
    transform: translateX(128%);
    opacity: 0;
  }
  100% {
    transform: translateX(128%);
    opacity: 0;
  }
}

.mint-focus-hand-dock {
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(circle at 86% -22%, rgba(56, 189, 248, 0.2), transparent 42%),
    radial-gradient(circle at 10% 120%, rgba(186, 230, 253, 0.24), transparent 46%),
    linear-gradient(170deg, rgba(255, 255, 255, 0.92), rgba(237, 248, 255, 0.82));
  border-color: rgba(56, 189, 248, 0.56) !important;
  box-shadow:
    0 16px 32px rgba(2, 6, 23, 0.2),
    0 0 0 1px rgba(125, 211, 252, 0.34),
    inset 0 1px 0 rgba(255, 255, 255, 0.78);
}

.mint-focus-hand-dock::before {
  content: "";
  position: absolute;
  inset: 0 0 auto;
  height: 48%;
  pointer-events: none;
  border-radius: inherit;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.32), transparent);
  opacity: 0.8;
}

.mint-focus-hand-dock::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(106deg, transparent 0%, rgba(255, 255, 255, 0.34) 44%, transparent 66%),
    repeating-linear-gradient(
      120deg,
      rgba(255, 255, 255, 0.05) 0px,
      rgba(255, 255, 255, 0.05) 7px,
      transparent 7px,
      transparent 30px
    );
  opacity: 0.46;
  animation: mint-focus-hand-sheen 13s ease-in-out infinite;
}

.mint-focus-hand-row {
  position: relative;
  z-index: 1;
  display: flex;
  gap: 10px;
  overflow-x: auto;
  padding: 4px 2px 8px;
  perspective: 920px;
  scroll-snap-type: x proximity;
}

.mint-focus-hand-row::-webkit-scrollbar {
  height: 8px;
}

.mint-focus-hand-row::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.45);
  border-radius: 999px;
}

.mint-focus-hand-row::-webkit-scrollbar-track {
  background: transparent;
}

.mint-focus-hand-card {
  --focus-hand-rot: 0deg;
  --focus-hand-drop: 0px;
  position: relative;
  width: 92px;
  flex-shrink: 0;
  overflow: hidden;
  border-radius: 14px;
  border: 1px solid rgba(125, 211, 252, 0.44);
  background: linear-gradient(165deg, rgba(255, 255, 255, 0.88), rgba(241, 245, 249, 0.84));
  padding: 4px;
  transform-origin: 50% 110%;
  transform: translateY(var(--focus-hand-drop)) rotate(var(--focus-hand-rot)) translateZ(0);
  box-shadow:
    0 10px 18px -12px rgba(15, 23, 42, 0.42),
    inset 0 1px 0 rgba(255, 255, 255, 0.64);
  scroll-snap-align: center;
  transition:
    transform var(--mint-motion-duration-ui) var(--mint-motion-ease-standard),
    box-shadow var(--mint-motion-duration-ui) var(--mint-motion-ease-standard),
    border-color var(--mint-motion-duration-ui) var(--mint-motion-ease-standard),
    opacity var(--mint-motion-duration-ui) var(--mint-motion-ease-standard);
}

.mint-focus-hand-card::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    radial-gradient(circle at 24% 14%, rgba(255, 255, 255, 0.24), transparent 42%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.22), transparent 42%);
  z-index: 3;
}

.mint-focus-hand-card::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: inset 0 -1px 0 rgba(15, 23, 42, 0.18);
  z-index: 3;
}

.mint-focus-hand-card:hover:not(.mint-focus-hand-card--used):not(.mint-focus-hand-card--selected) {
  transform: translateY(calc(var(--focus-hand-drop) - 8px)) rotate(var(--focus-hand-rot)) scale(1.015);
  border-color: rgba(56, 189, 248, 0.78);
  box-shadow:
    0 18px 24px -14px rgba(14, 116, 144, 0.42),
    0 0 18px rgba(56, 189, 248, 0.18);
}

.mint-focus-hand-card--selected {
  border-color: rgba(56, 189, 248, 0.95);
  box-shadow:
    0 0 0 2px rgba(125, 211, 252, 0.6),
    0 18px 28px rgba(8, 47, 73, 0.34),
    0 0 22px rgba(56, 189, 248, 0.3);
  transform: translateY(-14px) scale(1.055) rotate(var(--focus-hand-rot));
}

.mint-focus-hand-card--used {
  opacity: 0.44;
  filter: grayscale(0.26) saturate(0.74);
  box-shadow: 0 8px 16px -12px rgba(15, 23, 42, 0.35);
}

.mint-focus-hand-card--loading {
  width: 86px;
  height: 112px;
  display: grid;
  place-items: center;
  text-align: center;
  background:
    linear-gradient(180deg, rgba(226, 232, 240, 0.88), rgba(241, 245, 249, 0.88));
}

.mint-focus-hand-actions {
  position: relative;
  z-index: 1;
}

.mint-focus-hand-dock--stage {
  position: sticky;
  bottom: max(6px, env(safe-area-inset-bottom));
  z-index: 26;
  backdrop-filter: blur(14px) saturate(1.06);
  -webkit-backdrop-filter: blur(14px) saturate(1.06);
}

/* Stage page hierarchy */
@keyframes mint-stage-atmo-drift {
  0% {
    transform: translate3d(-2%, -1%, 0) scale(1);
  }
  100% {
    transform: translate3d(2%, 1%, 0) scale(1.04);
  }
}

@keyframes mint-stage-board-breathe {
  0% {
    transform: translate3d(-1.5%, -1%, 0) scale(1);
  }
  100% {
    transform: translate3d(1.5%, 1%, 0) scale(1.03);
  }
}

@keyframes mint-stage-board-glint {
  0% {
    background-position: -140% 0, 0 0;
  }
  48% {
    background-position: -140% 0, 0 0;
  }
  100% {
    background-position: 140% 0, 0 0;
  }
}

.stage-focus-root {
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  gap: var(--stage-focus-gap, 12px);
  min-height: 100dvh;
  padding: 8px;
  padding-bottom: max(8px, env(safe-area-inset-bottom));
  overflow-x: hidden;
  position: relative;
  isolation: isolate;
  background:
    radial-gradient(circle at 14% -4%, rgba(56, 189, 248, 0.16), transparent 42%),
    radial-gradient(circle at 86% 8%, rgba(186, 230, 253, 0.28), transparent 44%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.52), rgba(238, 250, 255, 0.34));
}

.stage-focus-root::before {
  content: "";
  position: absolute;
  inset: -14% -8% auto;
  height: 62%;
  border-radius: 999px;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(circle at 24% 38%, rgba(56, 189, 248, 0.24), transparent 46%),
    radial-gradient(circle at 78% 24%, rgba(125, 211, 252, 0.28), transparent 42%);
  filter: blur(28px);
  opacity: 0.66;
  animation: mint-stage-atmo-drift 18s ease-in-out infinite alternate;
}

.stage-focus-root::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    repeating-linear-gradient(
      115deg,
      rgba(255, 255, 255, 0.06) 0px,
      rgba(255, 255, 255, 0.06) 6px,
      transparent 6px,
      transparent 28px
    );
  opacity: 0.22;
}

.stage-focus-root > * {
  position: relative;
  z-index: 1;
}

.stage-focus-toolbar {
  position: sticky;
  top: max(6px, env(safe-area-inset-top));
  z-index: 34;
  border-color: var(--stage-panel-border, rgba(56, 189, 248, 0.42)) !important;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.8), rgba(231, 246, 255, 0.72)),
    var(--stage-panel-bg, linear-gradient(180deg, rgba(255, 255, 255, 0.94), rgba(235, 248, 255, 0.9))) !important;
  box-shadow:
    var(--stage-panel-shadow, 0 10px 28px rgba(2, 6, 23, 0.16)),
    inset 0 1px 0 rgba(255, 255, 255, 0.66);
  backdrop-filter: blur(14px) saturate(1.08);
  -webkit-backdrop-filter: blur(14px) saturate(1.08);
  overflow: hidden;
}

.stage-focus-toolbar::before {
  content: "";
  position: absolute;
  left: 10px;
  right: 10px;
  top: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.82), transparent);
  pointer-events: none;
}

.stage-focus-toolbar-actions {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(56, 189, 248, 0.42);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.86), rgba(237, 249, 255, 0.7));
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(8px) saturate(1.08);
  -webkit-backdrop-filter: blur(8px) saturate(1.08);
}

.stage-focus-toolbar-status {
  font-size: 11px;
  font-weight: 700;
  color: var(--mint-text-secondary, #475569);
  white-space: nowrap;
}

.stage-focus-toolbar-hint {
  font-size: 10px;
  font-weight: 600;
  color: var(--mint-text-hint, #94a3b8);
  white-space: nowrap;
}

.stage-focus-toolbar-feedback {
  display: inline-flex;
  align-items: center;
  min-height: 24px;
  padding: 0 8px;
  border-radius: 999px;
  border: 1px solid rgba(56, 189, 248, 0.35);
  background: linear-gradient(180deg, rgba(240, 249, 255, 0.82), rgba(224, 242, 254, 0.65));
  color: #0f4c6b;
  font-size: 10px;
  font-weight: 700;
  white-space: nowrap;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.66);
}

.stage-focus-toolbar-feedback--info {
  border-color: rgba(56, 189, 248, 0.35);
  background: linear-gradient(180deg, rgba(240, 249, 255, 0.82), rgba(224, 242, 254, 0.65));
  color: #0f4c6b;
}

.stage-focus-toolbar-feedback--success {
  border-color: rgba(16, 185, 129, 0.42);
  background: linear-gradient(180deg, rgba(236, 253, 245, 0.88), rgba(209, 250, 229, 0.7));
  color: #065f46;
}

.stage-focus-toolbar-feedback--warn {
  border-color: rgba(245, 158, 11, 0.46);
  background: linear-gradient(180deg, rgba(255, 251, 235, 0.9), rgba(254, 243, 199, 0.72));
  color: #92400e;
}

.stage-focus-toolbar .btn,
.stage-focus-toolbar-speed-select,
.stage-focus-toolbar .mint-sfx-toggle {
  touch-action: manipulation;
}

.stage-focus-toolbar .btn {
  transform: translateZ(0);
  will-change: transform;
  transition-property: transform, box-shadow, border-color, background-color, color, opacity, filter;
  transition-duration: var(--mint-motion-duration-ui);
  transition-timing-function: var(--mint-motion-ease-standard);
}

.stage-focus-toolbar .btn:active:not(:disabled),
.stage-focus-toolbar .btn[data-pressed="true"] {
  transform: translateY(0) scale(var(--mint-motion-press-scale));
  transition-duration: 0ms;
}

.stage-focus-toolbar-actions .btn {
  min-height: var(--mint-focus-toolbar-hit-size);
  border-radius: var(--mint-focus-toolbar-hit-radius);
}

.stage-focus-toolbar-actions--replay {
  gap: 4px;
  padding: 4px 6px;
}

.stage-focus-toolbar-actions--replay .btn {
  min-height: var(--mint-focus-toolbar-hit-size);
}

.stage-focus-toolbar-speed {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  font-weight: 700;
  color: var(--mint-text-secondary, #475569);
  white-space: nowrap;
}

.stage-focus-toolbar-speed-select {
  min-height: var(--mint-focus-toolbar-hit-size);
  border-radius: var(--mint-focus-toolbar-hit-radius);
  border: 1px solid rgba(148, 163, 184, 0.42);
  background: rgba(255, 255, 255, 0.92);
  padding: 0 6px;
  font-size: 12px;
}

@media (pointer: coarse) {
  :root {
    --mint-focus-toolbar-hit-size: var(--mint-focus-toolbar-hit-size-coarse);
  }
}

.stage-focus-arena-shell {
  border-color: var(--stage-shell-border, rgba(125, 211, 252, 0.46)) !important;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.64), rgba(238, 250, 255, 0.42)),
    var(--stage-shell-bg, linear-gradient(165deg, rgba(255, 255, 255, 0.96), rgba(235, 248, 255, 0.92))) !important;
  box-shadow: var(--stage-shell-shadow, 0 20px 40px -26px rgba(2, 132, 199, 0.46));
  min-height: 0;
  overflow: hidden;
  position: relative;
  backdrop-filter: blur(12px) saturate(1.06);
  -webkit-backdrop-filter: blur(12px) saturate(1.06);
}

.stage-focus-arena-shell::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 78% 18%, rgba(255, 255, 255, 0.26), transparent 34%),
    radial-gradient(circle at 18% 78%, rgba(125, 211, 252, 0.18), transparent 38%);
  opacity: 0.72;
}

.stage-focus-arena-shell > * {
  position: relative;
  z-index: 1;
}

.stage-focus-arena-inner {
  min-height: 0;
  display: grid;
  gap: var(--stage-focus-gap, 12px);
  align-content: start;
}

.stage-focus-columns {
  min-height: 0;
}

.stage-focus-main-column {
  min-height: 0;
  align-content: start;
}

.stage-focus-board-shell {
  min-height: 0;
  display: grid;
  align-content: start;
  position: relative;
  overflow: hidden;
  border-radius: 24px;
  padding: clamp(4px, 0.6vw, 8px);
  border: 1px solid var(--stage-board-shell-border, rgba(125, 211, 252, 0.52));
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.46), rgba(224, 242, 254, 0.28)),
    var(--stage-board-shell-bg, linear-gradient(165deg, rgba(255, 255, 255, 0.74), rgba(227, 245, 255, 0.56)));
  box-shadow: var(--stage-board-shell-shadow, 0 22px 38px -26px rgba(2, 132, 199, 0.6), 0 10px 24px rgba(2, 6, 23, 0.14));
  backdrop-filter: blur(10px) saturate(1.06);
  -webkit-backdrop-filter: blur(10px) saturate(1.06);
}

.stage-focus-board-shell::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(circle at 18% 22%, rgba(255, 255, 255, 0.38), transparent 34%),
    radial-gradient(circle at 82% 16%, rgba(125, 211, 252, 0.26), transparent 38%);
  opacity: 0.66;
  animation: mint-stage-board-breathe 12s ease-in-out infinite alternate;
}

.stage-focus-board-shell::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    linear-gradient(
      118deg,
      transparent 0%,
      rgba(255, 255, 255, 0.18) 42%,
      rgba(125, 211, 252, 0.12) 58%,
      transparent 100%
    ),
    repeating-linear-gradient(
      132deg,
      rgba(255, 255, 255, 0.05) 0px,
      rgba(255, 255, 255, 0.05) 5px,
      transparent 5px,
      transparent 24px
    );
  background-size: 220% 100%, auto;
  background-position: -140% 0, 0 0;
  opacity: 0.2;
  animation: mint-stage-board-glint 16s ease-in-out infinite;
}

.stage-focus-board-shell > * {
  position: relative;
  z-index: 1;
}

.stage-focus-board-shell--replay {
  border-radius: 20px;
}

.stage-focus-board-shell .mint-stage {
  padding: clamp(16px, 2vw, 28px) clamp(10px, 1.6vw, 18px) clamp(12px, 1.8vw, 22px);
  border: 1px solid rgba(125, 211, 252, 0.32);
  box-shadow:
    0 20px 36px -28px rgba(14, 116, 144, 0.72),
    inset 0 1px 0 rgba(255, 255, 255, 0.56);
}

.stage-focus-board-shell .mint-stage__board > * {
  transform: rotateX(1.4deg);
}

.stage-focus-cutin {
  margin-top: 0;
  margin-bottom: 1px;
  transform-origin: center top;
}

.stage-focus-cutin.mint-nyano-reaction {
  border-radius: 16px;
  box-shadow:
    0 14px 26px -22px rgba(2, 6, 23, 0.56),
    0 0 0 1px rgba(125, 211, 252, 0.26),
    inset 0 1px 0 rgba(255, 255, 255, 0.22);
}

.stage-focus-cutin.mint-nyano-reaction .mint-nyano-reaction__line {
  font-size: clamp(16px, 1.55vw, 22px);
}

.stage-focus-cutin.mint-nyano-reaction .mint-nyano-reaction__badge {
  font-size: 12px;
}

.stage-focus-cutin.mint-nyano-reaction .mint-nyano-reaction__burst-banner {
  display: none;
}

.stage-focus-replay-column .mint-nyano-reaction {
  margin-top: 2px;
}

.mint-announcer-stack {
  display: grid;
  gap: 10px;
  min-height: 0;
  align-content: start;
}

.stage-focus-announcer-stack {
  position: relative;
  z-index: var(--mint-z-announcer);
  gap: clamp(8px, 1.2vw, 12px);
}

.mint-status-summary-slot {
  position: relative;
  min-height: 28px;
}

.mint-status-summary {
  display: flex;
  align-items: center;
  min-height: 28px;
  width: 100%;
  border-radius: 11px;
  border: 1px solid rgba(125, 211, 252, 0.4);
  background: linear-gradient(170deg, rgba(255, 255, 255, 0.84), rgba(236, 248, 255, 0.68));
  padding: 4px 9px;
  box-shadow:
    0 10px 20px -16px rgba(14, 116, 144, 0.62),
    inset 0 1px 0 rgba(255, 255, 255, 0.74);
  transition:
    opacity var(--mint-motion-duration-ui) var(--mint-motion-ease-standard),
    transform var(--mint-motion-duration-ui) var(--mint-motion-ease-standard);
}

.mint-status-summary-slot--idle .mint-status-summary {
  opacity: 0.74;
}

.mint-status-summary--placeholder {
  opacity: 0.55;
  color: rgba(71, 85, 105, 0.82);
}

.mint-status-summary__text {
  display: block;
  width: 100%;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.01em;
  color: rgba(14, 116, 144, 0.95);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mint-nyano-reaction-slot {
  position: relative;
  min-height: clamp(64px, 7.5vw, 86px);
}

.mint-nyano-reaction-slot--stage-focus {
  min-height: clamp(72px, 8.8vw, 96px);
}

.mint-nyano-reaction-slot__placeholder {
  display: block;
  min-height: inherit;
  width: 100%;
  visibility: hidden;
  pointer-events: none;
}

.mint-nyano-reaction-slot__content {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: flex-start;
}

@keyframes mint-stage-side-glint {
  0% {
    transform: translateX(-120%);
    opacity: 0;
  }
  18% {
    opacity: 0.28;
  }
  42% {
    opacity: 0.08;
  }
  100% {
    transform: translateX(120%);
    opacity: 0;
  }
}

.stage-focus-side-column {
  min-height: 0;
  align-content: start;
  gap: clamp(10px, 1.2vw, 14px);
}

.stage-focus-replay-shell {
  min-height: 0;
  align-content: start;
}

.stage-focus-replay-shell > * {
  min-width: 0;
}

.stage-focus-side-panel {
  position: relative;
  overflow: hidden;
  border-color: var(--stage-side-panel-border, rgba(125, 211, 252, 0.48)) !important;
  background:
    var(--stage-side-panel-bg, linear-gradient(180deg, rgba(255, 255, 255, 0.86), rgba(236, 248, 255, 0.7))),
    linear-gradient(150deg, rgba(14, 165, 233, 0.08), rgba(125, 211, 252, 0.04));
  box-shadow: var(--stage-side-panel-shadow, 0 16px 30px -22px rgba(2, 132, 199, 0.52), 0 8px 18px rgba(2, 6, 23, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.72));
  backdrop-filter: blur(12px) saturate(1.08);
  -webkit-backdrop-filter: blur(12px) saturate(1.08);
}

.stage-focus-side-panel::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 38%;
  pointer-events: none;
  z-index: 0;
  background: linear-gradient(
    110deg,
    transparent 0%,
    rgba(255, 255, 255, 0.38) 44%,
    rgba(191, 219, 254, 0.16) 62%,
    transparent 100%
  );
  filter: blur(0.2px);
  animation: mint-stage-side-glint 13s ease-in-out infinite;
}

.stage-focus-side-panel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(circle at 84% 14%, rgba(255, 255, 255, 0.24), transparent 36%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.1), transparent 45%);
  opacity: 0.36;
}

.stage-focus-side-panel > * {
  position: relative;
  z-index: 1;
}

.stage-focus-side-panel--muted {
  background:
    var(--stage-side-panel-bg-muted, linear-gradient(180deg, rgba(247, 252, 255, 0.9), rgba(232, 243, 252, 0.78))),
    linear-gradient(150deg, rgba(148, 163, 184, 0.08), rgba(125, 211, 252, 0.04));
}

.stage-focus-side-panel--timeline {
  box-shadow: var(--stage-side-panel-shadow-strong, 0 20px 34px -24px rgba(2, 132, 199, 0.5), 0 10px 22px rgba(15, 23, 42, 0.12), inset 0 1px 0 rgba(255, 255, 255, 0.72));
}

@media (prefers-reduced-motion: reduce) {
  .stage-focus-root::before {
    animation: none;
  }
  .stage-focus-board-shell::before,
  .stage-focus-board-shell::after {
    animation: none;
  }
  .stage-focus-side-panel::before {
    animation: none;
  }
}

[data-vfx="off"] .stage-focus-root::before,
[data-vfx="off"] .stage-focus-root::after {
  display: none !important;
}

[data-vfx="off"] .stage-focus-side-panel::before,
[data-vfx="off"] .stage-focus-side-panel::after,
[data-vfx="off"] .stage-focus-board-shell::before,
[data-vfx="off"] .stage-focus-board-shell::after {
  display: none !important;
}

[data-vfx="low"] .stage-focus-root::before {
  animation-duration: 30s !important;
  opacity: 0.36;
}

[data-vfx="low"] .stage-focus-side-panel::before {
  animation-duration: 22s !important;
  opacity: 0.22;
}

[data-vfx="low"] .stage-focus-side-panel::after {
  opacity: 0.22;
}

[data-vfx="low"] .stage-focus-board-shell::before {
  animation: none !important;
  opacity: 0.36;
}

[data-vfx="low"] .stage-focus-board-shell::after {
  animation-duration: 24s !important;
  opacity: 0.12;
}

[data-vfx="medium"] .stage-focus-board-shell::before {
  animation-duration: 14s;
  opacity: 0.56;
}

[data-vfx="medium"] .stage-focus-board-shell::after {
  animation-duration: 18s;
  opacity: 0.18;
}

[data-vfx="medium"] .stage-focus-board-shell .mint-stage__board > * {
  transform: rotateX(1.7deg);
}

[data-vfx="high"] .stage-focus-board-shell::before {
  animation-duration: 10s;
  opacity: 0.72;
}

[data-vfx="high"] .stage-focus-board-shell::after {
  animation-duration: 12s;
  opacity: 0.24;
}

[data-vfx="high"] .stage-focus-board-shell .mint-stage__board > * {
  transform: rotateX(2deg) translateY(-1px);
}

@media (min-width: 768px) {
  .stage-focus-root {
    padding: 12px;
  }
  .mint-focus-hand-row {
    justify-content: center;
    overflow-x: visible;
  }
  .mint-focus-hand-card {
    width: 106px;
  }
}

@media (max-width: 768px) {
  .mint-announcer-stack {
    gap: 6px;
  }

  .stage-focus-announcer-stack {
    gap: 4px;
  }

  .mint-status-summary-slot {
    min-height: 22px;
  }

  .mint-status-summary {
    min-height: 22px;
    padding: 3px 8px;
  }

  .mint-status-summary__text {
    font-size: 10px;
  }

  .mint-focus-hand-dock {
    border-radius: 14px;
  }

  .mint-focus-hand-row {
    gap: 8px;
    padding-bottom: 6px;
  }

  .mint-focus-hand-card {
    width: 88px;
  }

  .mint-nyano-reaction-slot {
    min-height: 0;
  }

  .mint-nyano-reaction-slot--stage-focus {
    min-height: 0;
  }

  .stage-focus-toolbar-actions {
    width: 100%;
    border-radius: 12px;
    justify-content: flex-start;
  }

  .stage-focus-toolbar-status {
    width: 100%;
  }

  .stage-focus-toolbar-hint {
    width: 100%;
  }

  .stage-focus-toolbar-feedback {
    width: 100%;
    justify-content: flex-start;
  }

  .stage-focus-toolbar-actions--replay {
    width: 100%;
  }
}

/* ── Mobile: min-size guarantee for tap targets ── */
@media (max-width: 480px) {
  .mint-hand { gap: 6px; }
  .mint-hand-card {
    width: 68px;
    min-height: 80px;
    padding: 3px;
  }

  .mint-focus-hand-card {
    width: 82px;
  }
}


/* ── Mobile Confirm (NIN-UX-022) ─────────────────────────────────────── */

.mint-confirm-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 10px 16px;
  border-radius: 16px;
  background: var(--mint-surface);
  border: 2px solid var(--mint-accent);
  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.2);
  animation: mint-slide-up 0.25s ease-out;
}

.mint-confirm-btn {
  padding: 8px 24px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 700;
  font-family: 'Nunito', sans-serif;
  cursor: pointer;
  transition:
    background var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    box-shadow var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    transform var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    color var(--mint-motion-duration-fast) var(--mint-motion-ease-standard);
  border: none;
}

.mint-confirm-btn--ok {
  background: var(--mint-accent);
  color: white;
}

.mint-confirm-btn--ok:hover {
  background: var(--mint-accent-dark);
  box-shadow: 0 0 12px var(--mint-cell-active-glow);
}

.mint-confirm-btn--cancel {
  background: var(--mint-cell-flat);
  color: var(--mint-text-secondary);
}

.mint-confirm-btn--cancel:hover {
  background: var(--mint-cell-flat-dark);
}


/* ── Result Overlay ──────────────────────────────────────────────────── */

.mint-result-overlay {
  position: fixed;
  inset: 0;
  z-index: var(--mint-z-result-overlay);
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(12px);
  animation: mint-fade-in 0.4s ease;
}

.mint-result-panel {
  position: relative;
  min-width: 300px;
  max-width: 400px;
  padding: 32px;
  border-radius: 28px;
  background: var(--mint-surface);
  border: 2px solid var(--mint-accent-muted);
  box-shadow: 0 16px 48px rgba(16, 185, 129, 0.15);
  animation: mint-pop-in 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
  text-align: center;
}

.mint-result-panel--shareworthy::before,
.mint-result-panel--shareworthy::after {
  content: "";
  position: absolute;
  width: 28px;
  height: 28px;
  pointer-events: none;
}

.mint-result-panel--shareworthy::before {
  top: 10px;
  left: 10px;
  border-top: 2px solid rgba(56, 189, 248, 0.56);
  border-left: 2px solid rgba(56, 189, 248, 0.56);
  border-radius: 10px 0 0 0;
}

.mint-result-panel--shareworthy::after {
  right: 10px;
  bottom: 10px;
  border-right: 2px solid rgba(16, 185, 129, 0.56);
  border-bottom: 2px solid rgba(16, 185, 129, 0.56);
  border-radius: 0 0 10px 0;
}

.mint-result__title {
  font-family: 'Nunito', sans-serif;
  font-size: 28px;
  font-weight: 900;
  margin-bottom: 4px;
}

.mint-result__title--victory {
  color: #10B981;
  text-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
}

.mint-result__title--defeat {
  color: #EF4444;
  text-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
}

.mint-result__title--draw {
  color: #6B7280;
}

.mint-result__subtitle {
  font-size: 14px;
  color: var(--mint-text-hint);
  margin-bottom: 20px;
}

.mint-result__scores {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  margin-bottom: 24px;
}

.mint-result__score-val {
  font-family: 'Nunito', sans-serif;
  font-size: 42px;
  font-weight: 900;
  line-height: 1;
}

.mint-result__score-val--a { color: var(--mint-pa); }
.mint-result__score-val--b { color: var(--mint-pb); }

.mint-result__divider {
  font-size: 18px;
  color: var(--mint-text-hint);
}

/* ── Post-Game Summary (P1-150) ──────────────────────────────────────── */

.mint-result__summary {
  display: grid;
  gap: 6px;
  padding: 10px 16px;
  border-radius: 12px;
  background: var(--mint-surface-dim);
  border: 1px solid var(--mint-accent-muted);
  margin: 12px 0;
  font-size: 12px;
}

.mint-result__summary-line {
  display: flex;
  align-items: center;
  gap: 6px;
}

.mint-result__summary-icon { font-size: 14px; line-height: 1; }

.mint-result__summary-text {
  flex: 1;
  color: var(--mint-text-secondary);
  font-size: 11px;
}

.mint-result__quality {
  display: inline-block;
  padding: 1px 6px;
  border-radius: 6px;
  font-size: 10px;
  font-weight: 700;
}

.mint-result__quality--excellent { background: rgba(16,185,129,0.12); color: #059669; }
.mint-result__quality--great     { background: rgba(59,130,246,0.12); color: #2563EB; }
.mint-result__quality--good      { background: rgba(20,184,166,0.12); color: #0D9488; }
.mint-result__quality--neutral   { background: rgba(100,116,139,0.08); color: #64748B; }
.mint-result__quality--questionable { background: rgba(245,158,11,0.12); color: #D97706; }
.mint-result__quality--blunder   { background: rgba(239,68,68,0.12); color: #DC2626; }

.mint-result__actions {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
}

.mint-result__share-cue {
  margin: 10px 0 12px;
  font-size: 11px;
  font-weight: 700;
  color: var(--mint-text-accent);
}

.mint-result__btn {
  padding: 10px 24px;
  border-radius: 14px;
  border: 1.5px solid var(--mint-accent-muted);
  background: var(--mint-surface);
  color: var(--mint-text-primary);
  font-family: 'Nunito', sans-serif;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  transition:
    background var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    border-color var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    box-shadow var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    transform var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    color var(--mint-motion-duration-fast) var(--mint-motion-ease-standard);
}

.mint-result__btn:hover {
  border-color: var(--mint-accent);
  box-shadow: 0 0 12px rgba(56, 189, 248, 0.2);
}

.mint-result__btn--primary {
  background: var(--mint-accent);
  border-color: var(--mint-accent);
  color: white;
}

.mint-result__btn--primary:hover {
  background: var(--mint-accent-dark);
}


/* ═══════════════════════════════════════════════════════════════════════════
   Flip Arrow Overlay (NIN-UX-030, D-1/D-2)
   ═══════════════════════════════════════════════════════════════════════════ */

@keyframes mint-arrow-appear {
  0% { opacity: 0; transform: scale(0.8); }
  100% { opacity: 1; transform: scale(1); }
}

.mint-arrow-overlay {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 10;
}

.mint-arrow-line {
  filter: drop-shadow(0 0 3px var(--mint-flip-glow));
}

.mint-arrow-line--chain {
  filter: drop-shadow(0 0 4px var(--mint-chain-glow));
}

/* ── Board inner: relative positioning for arrow overlay ── */
.mint-board-inner {
  position: relative;
}


/* ═══════════════════════════════════════════════════════════════════════════
   NyanoReaction Mint (NIN-UX-032, D-4)
   ═══════════════════════════════════════════════════════════════════════════ */

.mint-nyano-reaction {
  font-family: 'Nunito', system-ui, sans-serif;
}

.mint-nyano-reaction--pixi {
  letter-spacing: 0.01em;
}

.mint-nyano-reaction {
  position: relative;
  overflow: hidden;
  isolation: isolate;
  border-radius: 22px;
  box-shadow:
    0 16px 30px -24px rgba(2, 6, 23, 0.55),
    0 0 0 1px rgba(125, 211, 252, 0.24),
    inset 0 1px 0 rgba(255, 255, 255, 0.18);
  transition:
    opacity var(--mint-motion-duration-pop) var(--mint-motion-ease-standard),
    transform var(--mint-motion-duration-pop) var(--mint-motion-ease-standard);
}

.mint-nyano-reaction--visible {
  opacity: 1;
  transform: translateY(0);
}

.mint-nyano-reaction--hidden {
  opacity: 0;
  transform: translateY(6px);
}

.mint-nyano-reaction--cutin::before {
  content: "";
  position: absolute;
  top: -12px;
  left: -30px;
  width: 78px;
  height: calc(100% + 24px);
  background: linear-gradient(
    120deg,
    color-mix(in srgb, var(--nyano-reaction-glow, rgba(16,185,129,0.42)) 68%, transparent),
    transparent
  );
  transform: skewX(-16deg);
  opacity: 0.72;
  pointer-events: none;
  z-index: 0;
}

.mint-nyano-reaction--cutin::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  border: 1px solid rgba(255, 255, 255, 0.34);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.26),
    inset 0 -1px 0 rgba(2, 6, 23, 0.2);
  z-index: 1;
}

.mint-nyano-reaction__inner {
  position: relative;
  z-index: 2;
  display: flex;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: 10px 14px;
  width: 100%;
  min-width: 0;
}

.mint-nyano-reaction__badge {
  font-size: 13px;
  font-weight: 700;
  padding: 3px 9px;
  border-radius: 9px;
  flex-shrink: 0;
}

.mint-nyano-reaction__badge--low {
  transform: scale(0.98);
}

.mint-nyano-reaction__badge--mid {
  transform: scale(1);
}

.mint-nyano-reaction__badge--high {
  transform: scale(1.05);
}

.mint-nyano-reaction__line {
  font-size: clamp(16px, 1.35vw, 22px);
  font-weight: 800;
  line-height: 1.2;
  letter-spacing: 0.014em;
  max-width: min(64ch, 100%);
  min-width: 0;
  overflow: visible;
  text-overflow: clip;
  white-space: normal;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.18);
}

.mint-nyano-reaction__reason {
  margin-left: auto;
  font-size: 10px;
  font-weight: 600;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid rgba(125, 211, 252, 0.25);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4);
  flex-shrink: 0;
}

.mint-nyano-reaction__cutin-flash,
.mint-nyano-reaction__scanline {
  pointer-events: none;
  position: absolute;
  inset: 0;
}

.mint-nyano-reaction__cutin-flash {
  z-index: 1;
  opacity: 0;
  background:
    linear-gradient(
      105deg,
      transparent 0%,
      color-mix(in srgb, var(--nyano-reaction-glow, rgba(16,185,129,0.45)) 60%, white) 36%,
      transparent 64%
    );
}

.mint-nyano-reaction__scanline {
  z-index: 1;
  opacity: 0.08;
  mix-blend-mode: screen;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.22) 0px,
      rgba(255, 255, 255, 0.22) 1px,
      transparent 1px,
      transparent 5px
    );
}

.mint-nyano-reaction__burst-banner {
  position: absolute;
  inset: 2px;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 0 12px;
  border-radius: 13px;
  opacity: 0;
  pointer-events: none;
  transform: translateX(-12%) skewX(-12deg);
  background:
    linear-gradient(
      102deg,
      rgba(249, 115, 22, 0.82) 0%,
      rgba(244, 63, 94, 0.76) 26%,
      rgba(56, 189, 248, 0.72) 58%,
      rgba(16, 185, 129, 0.68) 100%
    );
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.38),
    0 0 28px rgba(56, 189, 248, 0.32),
    0 14px 24px -18px rgba(2, 6, 23, 0.72);
}

.mint-nyano-reaction__burst-main,
.mint-nyano-reaction__burst-sub {
  color: #f8fafc;
  font-family: "Trebuchet MS", "Segoe UI", "Arial Black", sans-serif;
  letter-spacing: 0.08em;
  text-shadow: 0 1px 6px rgba(2, 6, 23, 0.85);
  transform: skewX(12deg);
}

.mint-nyano-reaction__burst-main {
  font-size: 11px;
  font-weight: 900;
}

.mint-nyano-reaction__burst-sub {
  font-size: 13px;
  font-weight: 900;
}

.mint-nyano-reaction--braveburst.mint-nyano-reaction--burst .mint-nyano-reaction__burst-banner {
  animation: mint-nyano-braveburst-banner 860ms cubic-bezier(0.16, 1, 0.3, 1);
}

.mint-nyano-reaction--burst .mint-nyano-reaction__cutin-flash {
  animation: mint-nyano-cutin-flash 560ms cubic-bezier(0.16, 1, 0.3, 1);
}

.mint-nyano-reaction--cutin {
  animation: mint-nyano-cutin-enter 460ms cubic-bezier(0.2, 0.85, 0.25, 1);
}

.mint-nyano-reaction--impact-low::before {
  opacity: 0.58;
}

.mint-nyano-reaction--impact-low .mint-nyano-reaction__line {
  letter-spacing: 0.005em;
}

.mint-nyano-reaction--impact-low.mint-nyano-reaction--burst .mint-nyano-reaction__cutin-flash {
  animation-duration: 440ms;
}

.mint-nyano-reaction--impact-mid::before {
  opacity: 0.72;
}

.mint-nyano-reaction--impact-mid.mint-nyano-reaction--burst .mint-nyano-reaction__cutin-flash {
  animation-duration: 560ms;
}

.mint-nyano-reaction--impact-high::before {
  width: 96px;
  opacity: 0.92;
}

.mint-nyano-reaction--impact-high .mint-nyano-reaction__line {
  letter-spacing: 0.018em;
  font-weight: 800;
}

.mint-nyano-reaction--impact-high .mint-nyano-reaction__badge {
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.36),
    0 0 14px color-mix(in srgb, var(--nyano-reaction-glow, rgba(16,185,129,0.45)) 72%, transparent);
}

.mint-nyano-reaction--impact-high.mint-nyano-reaction--burst .mint-nyano-reaction__cutin-flash {
  animation-duration: 740ms;
}

.mint-nyano-reaction--impact-high.mint-nyano-reaction--burst::after {
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.34),
    inset 0 -1px 0 rgba(2, 6, 23, 0.25),
    0 0 0 1px rgba(125, 211, 252, 0.32),
    0 0 18px color-mix(in srgb, var(--nyano-reaction-glow, rgba(16,185,129,0.42)) 56%, transparent);
}

.mint-nyano-reaction--pixi {
  border-color: rgba(56, 189, 248, 0.46) !important;
  box-shadow:
    0 18px 30px -24px rgba(2, 6, 23, 0.74),
    0 0 0 1px rgba(56, 189, 248, 0.26),
    inset 0 1px 0 rgba(148, 163, 184, 0.16);
}

.mint-nyano-reaction--pixi .mint-nyano-reaction__line {
  text-shadow: 0 0 18px rgba(125, 211, 252, 0.26);
}

.mint-nyano-reaction--pixi .mint-nyano-reaction__scanline {
  opacity: 0.13;
}

.mint-nyano-reaction--pixi .mint-nyano-reaction__reason {
  border-color: rgba(56, 189, 248, 0.34);
  box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.14);
}

@keyframes mint-nyano-cutin-enter {
  0% {
    opacity: 0;
    transform: translateX(-24px) translateY(4px) scale(0.97);
    filter: saturate(0.9);
  }
  58% {
    opacity: 1;
    transform: translateX(3px) translateY(0) scale(1.01);
    filter: saturate(1.05);
  }
  100% {
    opacity: 1;
    transform: translateX(0) translateY(0) scale(1);
    filter: saturate(1);
  }
}

@keyframes mint-nyano-cutin-flash {
  0% {
    opacity: 0;
    transform: translateX(-112%);
  }
  24% {
    opacity: 0.9;
  }
  100% {
    opacity: 0;
    transform: translateX(112%);
  }
}

@keyframes mint-nyano-braveburst-banner {
  0% {
    opacity: 0;
    transform: translateX(-20%) skewX(-12deg);
    filter: saturate(0.94) brightness(0.92);
  }
  20% {
    opacity: 0.98;
    transform: translateX(0) skewX(-12deg);
    filter: saturate(1.08) brightness(1.08);
  }
  80% {
    opacity: 0.95;
    transform: translateX(0) skewX(-12deg);
  }
  100% {
    opacity: 0;
    transform: translateX(9%) skewX(-12deg);
    filter: saturate(0.96) brightness(0.96);
  }
}


/* ═══════════════════════════════════════════════════════════════════════════
   SFX Mute Toggle (NIN-UX-031, D-3)
   ═══════════════════════════════════════════════════════════════════════════ */

.mint-sfx-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--mint-focus-toolbar-hit-size);
  height: var(--mint-focus-toolbar-hit-size);
  border-radius: calc(var(--mint-focus-toolbar-hit-radius) + 1px);
  border: 1px solid rgba(125, 211, 252, 0.52);
  background:
    linear-gradient(165deg, rgba(255, 255, 255, 0.84), rgba(238, 250, 255, 0.7));
  cursor: pointer;
  font-size: 16px;
  color: #0f4c6b;
  box-shadow:
    0 8px 18px -14px rgba(14, 116, 144, 0.7),
    inset 0 1px 0 rgba(255, 255, 255, 0.72);
  transition:
    background var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    border-color var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    transform var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    box-shadow var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    color var(--mint-motion-duration-md) var(--mint-motion-ease-standard);
  padding: 0;
  line-height: 1;
}

.mint-sfx-toggle:hover {
  transform: translateY(-1px);
  background:
    linear-gradient(165deg, rgba(255, 255, 255, 0.92), rgba(224, 242, 254, 0.78));
  border-color: rgba(56, 189, 248, 0.72);
  box-shadow:
    0 12px 22px -14px rgba(14, 116, 144, 0.82),
    inset 0 1px 0 rgba(255, 255, 255, 0.82);
}

.mint-sfx-toggle--muted {
  opacity: 0.65;
  color: #64748b;
  filter: saturate(0.72);
}


/* ═══════════════════════════════════════════════════════════════════════════
   Match Drawer Mint (NIN-UX-040, F-1)
   ═══════════════════════════════════════════════════════════════════════════ */

.mint-drawer-backdrop {
  position: fixed;
  inset: 0;
  z-index: var(--mint-z-overlay-backdrop);
  background: rgba(0, 0, 0, 0.25);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--mint-motion-duration-pop) var(--mint-motion-ease-standard);
}

.mint-drawer-backdrop--open {
  opacity: 1;
  pointer-events: auto;
}

.mint-drawer {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: var(--mint-z-overlay);
  width: 360px;
  max-width: 90vw;
  background: rgba(255, 255, 255, 0.92);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-left: 1px solid var(--mint-accent-muted);
  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.08);
  transform: translateX(100%);
  transition: transform var(--mint-motion-duration-pop) var(--mint-motion-ease-pop);
  display: flex;
  flex-direction: column;
  font-family: 'Nunito', system-ui, sans-serif;
}

.mint-drawer--open {
  transform: translateX(0);
}

.mint-drawer__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--mint-accent-muted);
  flex-shrink: 0;
}

.mint-drawer__title {
  font-size: 16px;
  font-weight: 700;
  color: var(--mint-text-primary);
}

.mint-drawer__close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 1px solid var(--mint-accent-muted);
  background: var(--mint-surface);
  cursor: pointer;
  font-size: 14px;
  color: var(--mint-text-secondary);
  transition:
    background var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    color var(--mint-motion-duration-md) var(--mint-motion-ease-standard);
  padding: 0;
}

.mint-drawer__close:hover {
  background: var(--mint-surface-dim);
}

.mint-drawer__body {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
  display: grid;
  gap: 16px;
  align-content: start;
}

/* Drawer toggle button */
.mint-drawer-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 12px;
  border: 1px solid var(--mint-accent-muted);
  background: var(--mint-surface);
  cursor: pointer;
  font-size: 18px;
  color: var(--mint-text-secondary);
  transition:
    background var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    border-color var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    transform var(--mint-motion-duration-md) var(--mint-motion-ease-standard),
    box-shadow var(--mint-motion-duration-md) var(--mint-motion-ease-standard);
  padding: 0;
  line-height: 1;
}

.mint-drawer-toggle:hover {
  background: var(--mint-surface-dim);
  border-color: var(--mint-accent);
}

/* ── Mobile: Bottom sheet ── */
@media (max-width: 640px) {
  .mint-drawer {
    top: auto;
    right: 0;
    left: 0;
    bottom: 0;
    width: 100%;
    max-width: 100%;
    height: 60vh;
    border-left: none;
    border-top: 1px solid var(--mint-accent-muted);
    border-radius: 20px 20px 0 0;
    transform: translateY(100%);
    box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.1);
  }

  .mint-drawer--open {
    transform: translateY(0);
  }
}


/* ═══════════════════════════════════════════════════════════════════════════
   Compact Card Skin (P1-100) — "遊戯王級"カードフレーム
   ═══════════════════════════════════════════════════════════════════════════ */

.mint-compact-card {
  background: linear-gradient(
    145deg,
    rgba(255, 255, 255, 0.97) 0%,
    rgba(248, 250, 252, 0.92) 100%
  );
  box-shadow:
    0 1px 4px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  transition: box-shadow var(--mint-motion-duration-md) var(--mint-motion-ease-standard);
}

.mint-cell--owner-a .mint-compact-card {
  border-color: var(--mint-pa-light);
  box-shadow:
    0 2px 8px -2px var(--mint-pa-glow),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

.mint-cell--owner-b .mint-compact-card {
  border-color: var(--mint-pb-light);
  box-shadow:
    0 2px 8px -2px var(--mint-pb-glow),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

/* ═══════════════════════════════════════════════════════════════════════════
   DuelStage Mint (P2-200) — Cinematic Arena Stage
   "Yu-Gi-Oh級" — the board is a stage, the game is a show.
   ═══════════════════════════════════════════════════════════════════════════ */

.mint-stage {
  position: relative;
  padding: 28px 16px 24px;
  border-radius: 28px;
  overflow: hidden;
  /* Deeper, richer gradient — dark center pulls focus to the board */
  background: linear-gradient(
    170deg,
    #d9f2ff 0%,
    #eaf8ff 15%,
    var(--mint-bg) 40%,
    #dff2ff 70%,
    #d2ebff 100%
  );
  isolation: isolate;
  /* Subtle inner border for premium depth */
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.5),
    inset 0 2px 4px rgba(255, 255, 255, 0.4),
    0 4px 24px rgba(0, 0, 0, 0.06),
    0 1px 3px rgba(0, 0, 0, 0.04);
}

/* ── Holo Grid Background ── */
.mint-stage__holo {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.06;
  background:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 39px,
      var(--mint-accent) 39px,
      var(--mint-accent) 40px
    ),
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 39px,
      var(--mint-accent) 39px,
      var(--mint-accent) 40px
    );
  background-size: 40px 40px;
}

/* ── Vignette Overlay — draws eye to center ── */
.mint-stage::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  background: radial-gradient(
    ellipse 70% 60% at 50% 45%,
    transparent 40%,
    rgba(8, 47, 73, 0.05) 70%,
    rgba(8, 47, 73, 0.1) 100%
  );
}

/* ── Ambient sparkle dots (pure CSS, no images) ── */
.mint-stage::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.4;
  background-image:
    radial-gradient(1.5px 1.5px at 12% 20%, rgba(255,255,255,0.8) 50%, transparent 50%),
    radial-gradient(1px 1px at 28% 65%, rgba(255,255,255,0.6) 50%, transparent 50%),
    radial-gradient(1.5px 1.5px at 45% 12%, rgba(255,255,255,0.7) 50%, transparent 50%),
    radial-gradient(1px 1px at 62% 78%, rgba(255,255,255,0.5) 50%, transparent 50%),
    radial-gradient(1.5px 1.5px at 78% 35%, rgba(255,255,255,0.8) 50%, transparent 50%),
    radial-gradient(1px 1px at 88% 55%, rgba(255,255,255,0.6) 50%, transparent 50%),
    radial-gradient(1.5px 1.5px at 35% 88%, rgba(255,255,255,0.7) 50%, transparent 50%),
    radial-gradient(1px 1px at 55% 42%, rgba(255,255,255,0.5) 50%, transparent 50%);
  animation: mint-sparkle-drift 12s ease-in-out infinite alternate;
}

@keyframes mint-sparkle-drift {
  0%   { opacity: 0.3; }
  50%  { opacity: 0.5; }
  100% { opacity: 0.3; }
}

/* ── Edge Glows — softer, wider ── */
.mint-stage__glow {
  position: absolute;
  left: 5%;
  right: 5%;
  height: 80px;
  pointer-events: none;
  z-index: 1;
  border-radius: 50%;
  filter: blur(28px);
}

.mint-stage__glow--top {
  top: -40px;
  background: radial-gradient(
    ellipse at center,
    rgba(125, 211, 252, 0.48) 0%,
    transparent 70%
  );
  opacity: 0.6;
}

.mint-stage__glow--bottom {
  bottom: -40px;
  background: radial-gradient(
    ellipse at center,
    rgba(56, 189, 248, 0.22) 0%,
    transparent 70%
  );
  opacity: 0.5;
}

/* ── Decorative paw watermarks (rendered in TSX as SVG) ── */
.mint-stage__paws {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

/* ── Board Container with 3D Tilt ── */
.mint-stage__board {
  position: relative;
  z-index: 2;
  perspective: 900px;
}

.mint-stage__board > * {
  transform: rotateX(2deg);
  transform-origin: center bottom;
}

.engine-drop-grid {
  position: absolute;
  inset: 0;
  margin: auto;
  z-index: 4;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 4px;
  pointer-events: none;
}

.engine-drop-grid__cell {
  border-radius: 6px;
  pointer-events: none;
}

.engine-drop-grid--active .engine-drop-grid__cell--droppable {
  pointer-events: auto;
  border: 1.5px dashed rgba(56, 189, 248, 0.42);
  background: rgba(8, 47, 73, 0.16);
  box-shadow: inset 0 0 0 1px rgba(125, 211, 252, 0.22);
  transition:
    border-color var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    background var(--mint-motion-duration-fast) var(--mint-motion-ease-standard),
    box-shadow var(--mint-motion-duration-fast) var(--mint-motion-ease-standard);
}

.engine-drop-grid--active .engine-drop-grid__cell--droppable:hover {
  border-color: rgba(56, 189, 248, 0.88);
  background: rgba(14, 116, 144, 0.24);
  box-shadow:
    inset 0 0 0 1px rgba(125, 211, 252, 0.4),
    0 0 16px rgba(56, 189, 248, 0.32);
}

.mint-stage--impact-low {
  --mint-stage-impact-glow: rgba(56, 189, 248, 0.18);
}

.mint-stage--impact-mid {
  --mint-stage-impact-glow: rgba(56, 189, 248, 0.32);
}

.mint-stage--impact-high {
  --mint-stage-impact-glow: rgba(251, 191, 36, 0.36);
}

.mint-stage--impact-burst {
  animation: mint-stage-impact-shell 760ms cubic-bezier(0.16, 1, 0.3, 1);
}

.mint-stage--impact-burst .mint-stage__holo {
  animation: mint-stage-impact-grid 760ms cubic-bezier(0.16, 1, 0.3, 1);
}

.mint-stage--impact-burst .mint-stage__board > * {
  animation: mint-stage-impact-board 760ms cubic-bezier(0.16, 1, 0.3, 1);
}

.mint-stage--impact-burst .mint-stage__glow {
  animation: mint-stage-impact-glow 760ms cubic-bezier(0.16, 1, 0.3, 1);
}

.mint-stage--impact-high.mint-stage--impact-burst,
.mint-stage--impact-high.mint-stage--impact-burst .mint-stage__holo,
.mint-stage--impact-high.mint-stage--impact-burst .mint-stage__board > *,
.mint-stage--impact-high.mint-stage--impact-burst .mint-stage__glow {
  animation-duration: 960ms;
}

@keyframes mint-stage-impact-shell {
  0% {
    filter: brightness(1) saturate(1) drop-shadow(0 0 0 rgba(0, 0, 0, 0));
  }
  28% {
    filter: brightness(1.06) saturate(1.1) drop-shadow(0 0 28px var(--mint-stage-impact-glow, rgba(56, 189, 248, 0.28)));
  }
  100% {
    filter: brightness(1) saturate(1) drop-shadow(0 0 0 rgba(0, 0, 0, 0));
  }
}

@keyframes mint-stage-impact-grid {
  0% {
    opacity: 0.06;
    transform: translate3d(0, 0, 0);
  }
  30% {
    opacity: 0.15;
    transform: translate3d(0, -4px, 0);
  }
  100% {
    opacity: 0.06;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes mint-stage-impact-board {
  0% {
    transform: rotateX(2deg) scale(0.996);
  }
  24% {
    transform: rotateX(2deg) scale(1.014);
  }
  100% {
    transform: rotateX(2deg) scale(1);
  }
}

@keyframes mint-stage-impact-glow {
  0% {
    opacity: 0.45;
    filter: blur(28px);
  }
  36% {
    opacity: 0.88;
    filter: blur(24px);
  }
  100% {
    opacity: 0.45;
    filter: blur(28px);
  }
}


/* ── Holo / Foil Effect (P1-110) ─────────────────────────────────────── */

@keyframes mint-holo-shift {
  from { --mint-holo-angle: 0deg; }
  to   { --mint-holo-angle: 360deg; }
}

@property --mint-holo-angle {
  syntax: "<angle>";
  inherits: false;
  initial-value: 0deg;
}

.mint-compact-card::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: conic-gradient(
    from var(--mint-holo-angle),
    rgba(255, 0, 0, 0.06),
    rgba(255, 165, 0, 0.06),
    rgba(255, 255, 0, 0.06),
    rgba(0, 255, 0, 0.06),
    rgba(0, 0, 255, 0.06),
    rgba(128, 0, 128, 0.06),
    rgba(255, 0, 0, 0.06)
  );
  mix-blend-mode: color-dodge;
  pointer-events: none;
  z-index: 5;
  animation: mint-holo-shift 8s linear infinite;
}


/* ── BattleHudMint (P3-300) ──────────────────────────────────────────── */

@keyframes mint-hud-glint-sweep {
  0% {
    transform: translateX(-118%);
    opacity: 0;
  }
  20% {
    opacity: 0.38;
  }
  38% {
    transform: translateX(132%);
    opacity: 0;
  }
  100% {
    transform: translateX(132%);
    opacity: 0;
  }
}

.mint-battle-hud {
  position: relative;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 18px;
  border: 1px solid rgba(148, 211, 252, 0.58);
  background:
    radial-gradient(circle at 14% -20%, rgba(125, 211, 252, 0.24), transparent 42%),
    linear-gradient(165deg, rgba(255, 255, 255, 0.82), rgba(238, 250, 255, 0.68));
  box-shadow:
    0 14px 28px -20px rgba(14, 116, 144, 0.6),
    0 6px 18px rgba(15, 23, 42, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.72);
  backdrop-filter: blur(14px) saturate(1.08);
  -webkit-backdrop-filter: blur(14px) saturate(1.08);
  overflow: hidden;
  font-size: 12px;
}

.mint-battle-hud::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: -28%;
  width: 28%;
  pointer-events: none;
  background: linear-gradient(102deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  animation: mint-hud-glint-sweep 10.5s ease-in-out infinite;
}

.mint-battle-hud::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.2), transparent 44%),
    repeating-linear-gradient(
      118deg,
      rgba(255, 255, 255, 0.05) 0px,
      rgba(255, 255, 255, 0.05) 5px,
      transparent 5px,
      transparent 24px
    );
  opacity: 0.52;
}

.mint-battle-hud > * {
  position: relative;
  z-index: 1;
}

.mint-battle-hud--pixi {
  border-color: rgba(56, 189, 248, 0.34);
  background:
    radial-gradient(circle at 12% -22%, rgba(34, 211, 238, 0.2), transparent 40%),
    linear-gradient(148deg, rgba(7, 22, 42, 0.9), rgba(6, 15, 30, 0.88));
  box-shadow:
    0 16px 32px rgba(2, 6, 23, 0.48),
    inset 0 1px 0 rgba(148, 163, 184, 0.18),
    0 0 24px rgba(56, 189, 248, 0.2);
}

.mint-battle-hud--pixi .mint-battle-hud__turn-label,
.mint-battle-hud--pixi .mint-battle-hud__phase-label {
  color: #cbd5e1;
}

.mint-battle-hud--pixi .mint-battle-hud__turn-value {
  color: #f8fafc;
}

.mint-battle-hud--pixi .mint-battle-hud__progress {
  background: rgba(30, 41, 59, 0.9);
}

.mint-battle-hud--pixi .mint-battle-hud__progress-fill {
  background: linear-gradient(90deg, #22d3ee 0%, #38bdf8 100%);
}

.mint-battle-hud--pixi .mint-battle-hud__advantage--emerald {
  background: rgba(16, 185, 129, 0.22);
  color: #86efac;
}

.mint-battle-hud--pixi .mint-battle-hud__advantage--red {
  background: rgba(239, 68, 68, 0.24);
  color: #fecaca;
}

.mint-battle-hud--pixi .mint-battle-hud__advantage--slate {
  background: rgba(148, 163, 184, 0.22);
  color: #e2e8f0;
}

.mint-battle-hud--pixi .mint-battle-hud__advantage--amber {
  background: rgba(245, 158, 11, 0.24);
  color: #fde68a;
}

.mint-battle-hud--pixi .mint-battle-hud__tip {
  border-color: rgba(56, 189, 248, 0.32);
  background: rgba(14, 116, 144, 0.24);
  color: #e0f2fe;
}

.mint-battle-hud--pixi .mint-battle-hud__ai-reason {
  border-color: rgba(56, 189, 248, 0.28);
  background: rgba(14, 116, 144, 0.22);
  color: #bae6fd;
}

.mint-battle-hud--pixi .mint-battle-hud__turn,
.mint-battle-hud--pixi .mint-battle-hud__phase {
  border-color: rgba(56, 189, 248, 0.28);
  background: linear-gradient(180deg, rgba(15, 23, 42, 0.54), rgba(15, 23, 42, 0.32));
  box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.12);
}

.mint-battle-hud--pixi .mint-battle-hud__phase-dot {
  background: radial-gradient(circle at 35% 35%, rgba(255, 255, 255, 0.96), rgba(34, 211, 238, 0.82));
  box-shadow: 0 0 10px rgba(34, 211, 238, 0.46);
}

.mint-battle-hud__turn {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
  padding: 2px 9px;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.28);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.56), rgba(241, 245, 249, 0.42));
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

.mint-battle-hud__turn-label {
  font-family: var(--font-display, system-ui);
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--mint-text-muted, #94a3b8);
}

.mint-battle-hud__turn-value {
  font-family: var(--font-mono, monospace);
  font-weight: 700;
  font-size: 15px;
  color: var(--mint-text-primary, #1e293b);
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.45);
}

.mint-battle-hud__progress {
  position: relative;
  width: 48px;
  height: 4px;
  border-radius: 999px;
  background: rgba(148, 163, 184, 0.3);
  box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.24);
  overflow: hidden;
}

.mint-battle-hud__progress-fill {
  position: relative;
  height: 100%;
  border-radius: 999px;
  background: linear-gradient(90deg, #22d3ee 0%, #34d399 100%);
  box-shadow: 0 0 10px rgba(20, 184, 166, 0.34);
  transition: width var(--mint-motion-duration-pop) var(--mint-motion-ease-standard);
}

.mint-battle-hud__progress-fill::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transform: translateX(-100%);
  animation: mint-hud-glint-sweep 2.8s ease-in-out infinite;
}

.mint-battle-hud__advantage {
  padding: 3px 10px;
  border-radius: 10px;
  font-weight: 700;
  font-size: 11px;
  white-space: nowrap;
  border: 1px solid rgba(148, 163, 184, 0.28);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.55);
}

.mint-battle-hud__advantage--emerald {
  background: rgba(16, 185, 129, 0.15);
  color: #059669;
}

.mint-battle-hud__advantage--red {
  background: rgba(239, 68, 68, 0.15);
  color: #dc2626;
}

.mint-battle-hud__advantage--slate {
  background: rgba(100, 116, 139, 0.12);
  color: #64748b;
}

.mint-battle-hud__advantage--amber {
  background: rgba(245, 158, 11, 0.15);
  color: #d97706;
}

.mint-battle-hud__phase {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.24);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.58), rgba(241, 245, 249, 0.42));
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.58);
}

.mint-battle-hud__player-tag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.22);
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.02em;
  line-height: 1.4;
}

.mint-battle-hud__player-tag--a {
  background: var(--mint-pa-base, #3b82f6);
  color: #fff;
  box-shadow: 0 0 6px var(--mint-pa-glow, rgba(59, 130, 246, 0.5));
}

.mint-battle-hud__player-tag--b {
  background: var(--mint-pb-base, #ef4444);
  color: #fff;
  box-shadow: 0 0 6px var(--mint-pb-glow, rgba(239, 68, 68, 0.5));
}

.mint-battle-hud__phase-label {
  font-size: 11px;
  color: var(--mint-text-secondary, #64748b);
  white-space: nowrap;
}

.mint-battle-hud__phase-dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.92), rgba(14, 165, 233, 0.84));
  box-shadow: 0 0 10px rgba(14, 165, 233, 0.4);
}


/* ── Card Selection Glow (P1-130) ────────────────────────────────────── */

@keyframes mint-card-select-glow {
  0%, 100% {
    box-shadow:
      0 0 0 2px var(--mint-select-ring, var(--mint-accent)),
      0 0 12px var(--mint-select-glow, var(--mint-cell-active-glow)),
      0 8px 20px rgba(0, 0, 0, 0.12);
  }
  50% {
    box-shadow:
      0 0 0 3px var(--mint-select-ring, var(--mint-accent)),
      0 0 24px var(--mint-select-glow, var(--mint-cell-active-glow)),
      0 8px 20px rgba(0, 0, 0, 0.12);
  }
}


/* ── Move Tip Badge (P1-120) ─────────────────────────────────────────── */

.mint-battle-hud__tip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 9px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  white-space: nowrap;
  background: rgba(16, 185, 129, 0.10);
  color: #059669;
  border: 1px solid rgba(167, 243, 208, 0.6);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.55);
  animation: mint-slide-up 0.3s ease-out;
}

.mint-battle-hud__tip-icon { font-size: 12px; line-height: 1; }
.mint-battle-hud__tip-label { font-size: 11px; }

/* Contextual variants */
.mint-battle-hud__tip--warning_dodge,
.mint-battle-hud__tip--corner_control {
  background: rgba(16, 185, 129, 0.12); color: #059669;
  border-color: rgba(167, 243, 208, 0.5);
}
.mint-battle-hud__tip--warning_triggered {
  background: rgba(245, 158, 11, 0.12); color: #D97706;
  border-color: rgba(245, 158, 11, 0.3);
}
.mint-battle-hud__tip--warning_trap {
  background: rgba(249, 115, 22, 0.10); color: #EA580C;
  border-color: rgba(249, 115, 22, 0.25);
}
.mint-battle-hud__tip--big_swing,
.mint-battle-hud__tip--domination_combo {
  background: rgba(239, 68, 68, 0.10); color: #DC2626;
  border-color: rgba(239, 68, 68, 0.25);
}
.mint-battle-hud__tip--chain_combo {
  background: rgba(139, 92, 246, 0.10); color: #7C3AED;
  border-color: rgba(139, 92, 246, 0.25);
}
.mint-battle-hud__tip--center_hold {
  background: rgba(100, 116, 139, 0.08); color: #64748B;
  border-color: rgba(100, 116, 139, 0.2);
}


/* ── AI Reason Badge (P3-312) ────────────────────────────────────────── */

.mint-battle-hud__ai-reason {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 9px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 600;
  white-space: nowrap;
  background: rgba(139, 92, 246, 0.08);
  color: #8B5CF6;
  border: 1px solid rgba(139, 92, 246, 0.2);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.55);
  animation: mint-slide-up 0.3s ease-out;
}

.mint-battle-hud__ai-reason-icon { font-size: 11px; line-height: 1; }
.mint-battle-hud__ai-reason-label { font-size: 10px; }

@media (max-width: 760px) {
  .mint-battle-hud {
    gap: 8px;
    padding: 8px 10px;
    border-radius: 14px;
  }

  .mint-battle-hud__turn {
    padding: 2px 7px;
  }

  .mint-battle-hud__turn-value {
    font-size: 13px;
  }

  .mint-battle-hud__progress {
    width: 38px;
  }

  .mint-battle-hud__advantage,
  .mint-battle-hud__tip,
  .mint-battle-hud__ai-reason {
    font-size: 10px;
  }

  .mint-battle-hud__phase {
    margin-left: 0;
  }
}

@media (max-width: 480px) {
  .mint-battle-hud {
    justify-content: space-between;
  }

  .mint-battle-hud__phase {
    width: 100%;
    justify-content: flex-start;
  }
}


/* ── Reduced Motion ──────────────────────────────────────────────────── */

@media (prefers-reduced-motion: reduce) {
  .mint-cell--selectable,
  .mint-cell--selected,
  .mint-cell--placed,
  .mint-cell--flipped,
  .mint-prompt,
  .mint-error-pill,
  .mint-hand-card,
  .mint-pressable,
  .mint-confirm-bar,
  .mint-result-overlay,
  .mint-result-panel,
  .mint-arrow-overlay,
  .mint-nyano-reaction,
  .mint-nyano-reaction__cutin-flash,
  .mint-nyano-reaction__scanline,
  .mint-nyano-reaction__burst-banner,
  .mint-drawer,
  .mint-drawer-backdrop,
  .mint-stage--impact-burst,
  .mint-stage--impact-burst .mint-stage__holo,
  .mint-stage--impact-burst .mint-stage__glow,
  .mint-stage--impact-burst .mint-stage__board > *,
  .engine-drop-grid--active .engine-drop-grid__cell--droppable {
    animation: none !important;
    transition-duration: 0s !important;
  }

  .mint-arrow-overlay g {
    opacity: 1 !important;
    animation: none !important;
  }

  .mint-stage__board > * {
    transform: none !important;
  }

  .mint-focus-hand-dock::after {
    animation: none !important;
  }

  .mint-compact-card::after {
    animation: none !important;
  }

  /* P1-130: Static glow fallback for card selection */
  .mint-hand-card--selected {
    animation: none !important;
    box-shadow: 0 0 0 2px var(--mint-select-ring, var(--mint-accent)),
                0 0 16px var(--mint-select-glow, var(--mint-cell-active-glow)),
                0 8px 20px rgba(0, 0, 0, 0.12) !important;
  }

  /* P1-120 / P3-312: Disable tip & reason badge entrance animation */
  .mint-battle-hud__tip,
  .mint-battle-hud__ai-reason {
    animation: none !important;
  }

  .mint-battle-hud::before,
  .mint-battle-hud::after,
  .mint-battle-hud__progress-fill::after {
    animation: none !important;
  }

  /* CARD-0101: disable holo foil in reduced motion */
  .mint-duel-card__foil {
    animation: none !important;
  }
}


/* ═══════════════════════════════════════════════════════════════════════════
   CARD-0101: CardNyanoDuel — Art-forward "duel" card skin
   ═══════════════════════════════════════════════════════════════════════════ */

.mint-duel-card {
  position: relative;
  overflow: hidden;
  border-radius: 14px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  background:
    radial-gradient(circle at 20% 12%, rgba(255, 255, 255, 0.16), transparent 48%),
    linear-gradient(165deg, rgba(30, 41, 59, 0.22), rgba(15, 23, 42, 0.52)),
    #1a1a2e;
  box-shadow:
    0 10px 18px -12px rgba(2, 6, 23, 0.9),
    inset 0 1px 0 rgba(255, 255, 255, 0.24);
  transition:
    box-shadow var(--mint-motion-duration-pop) var(--mint-motion-ease-standard),
    border-color var(--mint-motion-duration-pop) var(--mint-motion-ease-standard),
    transform var(--mint-motion-duration-pop) var(--mint-motion-ease-standard);
}

.mint-duel-card::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
  background:
    radial-gradient(circle at 28% 18%, rgba(255, 255, 255, 0.14), transparent 44%),
    linear-gradient(to bottom, transparent 38%, rgba(2, 6, 23, 0.28) 100%);
}

.mint-duel-card::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: 6;
  border: 1px solid rgba(255, 255, 255, 0.16);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.25),
    inset 0 -1px 0 rgba(2, 6, 23, 0.35);
}

/* Owner glow — activated by parent .mint-cell--owner-X */
.mint-cell--owner-a .mint-duel-card {
  border-color: var(--mint-pa-light);
  box-shadow:
    0 0 16px var(--mint-pa-glow),
    0 0 4px rgba(14, 165, 233, 0.3),
    0 10px 14px -10px rgba(0, 0, 0, 0.8);
}
.mint-cell--owner-b .mint-duel-card {
  border-color: var(--mint-pb-light);
  box-shadow:
    0 0 16px var(--mint-pb-glow),
    0 0 4px rgba(244, 63, 94, 0.3),
    0 10px 14px -10px rgba(0, 0, 0, 0.8);
}

/* Hand owner glow (no .mint-cell parent) */
.mint-duel-card--owner-a {
  border-color: var(--mint-pa-light);
  box-shadow:
    0 0 14px var(--mint-pa-glow),
    0 8px 12px -10px rgba(0, 0, 0, 0.8);
}
.mint-duel-card--owner-b {
  border-color: var(--mint-pb-light);
  box-shadow:
    0 0 14px var(--mint-pb-glow),
    0 8px 12px -10px rgba(0, 0, 0, 0.8);
}

/* NFT art hero layer */
.mint-duel-card__art {
  position: absolute;
  inset: 0;
  z-index: 0;
  transform: scale(1.015);
  filter: saturate(1.08) contrast(1.06);
}

/* Owner tint overlay */
.mint-duel-card__tint {
  position: absolute;
  inset: 0;
  z-index: 1;
  opacity: 0.09;
  pointer-events: none;
}

/* Glass bottom panel — premium frosted glass with subtle border */
.mint-duel-card__glass {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 4;
  backdrop-filter: blur(12px) saturate(1.38);
  -webkit-backdrop-filter: blur(12px) saturate(1.38);
  background: linear-gradient(
    180deg,
    rgba(2, 6, 23, 0.08) 0%,
    rgba(2, 6, 23, 0.44) 56%,
    rgba(2, 6, 23, 0.64) 100%
  );
  padding: 5px 6px 6px;
  border-top: 1px solid rgba(255, 255, 255, 0.28);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.24);
}

/* Edge cross layout inside glass panel (3x3 grid) */
.mint-duel-card__edges {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap: 2px;
}

/* Edge number cells */
.mint-duel-card__edge {
  --mint-edge-fg: #f1f5f9;
  --mint-edge-glow: rgba(148, 163, 184, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  min-height: 16px;
  border-radius: 7px;
  border: 1px solid rgba(148, 163, 184, 0.34);
  background:
    radial-gradient(circle at 28% 20%, rgba(255, 255, 255, 0.24), transparent 58%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(15, 23, 42, 0.34));
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.22),
    inset 0 -1px 0 rgba(2, 6, 23, 0.38),
    0 2px 3px rgba(2, 6, 23, 0.3);
}

.mint-duel-card__edge::before {
  content: "";
  position: absolute;
  top: 1px;
  left: 2px;
  right: 2px;
  height: 32%;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.34), rgba(255, 255, 255, 0));
  pointer-events: none;
}

.mint-duel-card__edge-value {
  position: relative;
  z-index: 1;
  font-size: 12px;
  font-weight: 900;
  line-height: 1;
  letter-spacing: 0.02em;
  color: var(--mint-edge-fg);
  text-shadow:
    0 1px 0 rgba(2, 6, 23, 0.95),
    0 0 6px var(--mint-edge-glow);
}

.mint-duel-card__edge--up,
.mint-duel-card__edge--down {
  justify-self: center;
  width: 88%;
}

.mint-duel-card__edge--left,
.mint-duel-card__edge--right {
  width: 100%;
}

/* Strength-based coloring — more vivid */
.mint-duel-card__edge--high {
  color: #fbbf24;
  text-shadow: 0 0 6px rgba(251, 191, 36, 0.5), 0 1px 3px rgba(0, 0, 0, 0.9);
}
.mint-duel-card__edge--mid  { color: #f1f5f9; }   /* value 4-7: bright silver */
.mint-duel-card__edge--low  { color: #94a3b8; }   /* value ≤ 3: dim */

/* Highlighted edge (flip winner) */
.mint-duel-card__edge--highlight {
  background: rgba(251, 191, 36, 0.35);
  border-radius: 4px;
  outline: 1.5px solid rgba(251, 191, 36, 0.7);
  text-shadow: 0 0 8px rgba(251, 191, 36, 0.6), 0 1px 3px rgba(0, 0, 0, 0.9);
}

/* Center cell — janken */
.mint-duel-card__janken {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  line-height: 1;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));
}

/* Trait accent bar at top */
.mint-duel-card__trait {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  z-index: 5;
}

/* Token ID label */
.mint-duel-card__token-id {
  position: absolute;
  top: 3px;
  left: 5px;
  z-index: 6;
  font-size: 8px;
  font-family: var(--font-mono, monospace);
  color: rgba(255, 255, 255, 0.6);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  pointer-events: none;
}

/* CARD polish overrides: edge gem readability + center badge depth */
.mint-duel-card__edge--high {
  --mint-edge-fg: #fbbf24;
  --mint-edge-glow: rgba(251, 191, 36, 0.72);
  border-color: rgba(251, 191, 36, 0.52);
  background:
    radial-gradient(circle at 28% 20%, rgba(254, 240, 138, 0.36), transparent 58%),
    linear-gradient(180deg, rgba(251, 191, 36, 0.2), rgba(120, 53, 15, 0.44));
}

.mint-duel-card__edge--mid {
  --mint-edge-fg: #f8fafc;
  --mint-edge-glow: rgba(241, 245, 249, 0.34);
}

.mint-duel-card__edge--low {
  --mint-edge-fg: #cbd5e1;
  --mint-edge-glow: rgba(148, 163, 184, 0.2);
  border-color: rgba(100, 116, 139, 0.42);
  background:
    radial-gradient(circle at 28% 20%, rgba(203, 213, 225, 0.2), transparent 56%),
    linear-gradient(180deg, rgba(30, 41, 59, 0.24), rgba(15, 23, 42, 0.45));
}

.mint-duel-card__edge--highlight {
  transform: translateY(-1px) scale(1.06);
  border-color: rgba(251, 191, 36, 0.88);
  box-shadow:
    0 0 0 1px rgba(254, 243, 199, 0.62),
    0 0 12px rgba(251, 191, 36, 0.46);
}

.mint-duel-card__janken {
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.42);
  background:
    radial-gradient(circle at 28% 20%, rgba(255, 255, 255, 0.4), transparent 58%),
    linear-gradient(180deg, rgba(14, 165, 233, 0.25), rgba(2, 6, 23, 0.44));
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    0 2px 4px rgba(2, 6, 23, 0.34);
}

.mint-duel-card__janken-glyph {
  font-size: 14px;
  line-height: 1;
  filter: drop-shadow(0 1px 3px rgba(2, 6, 23, 0.75));
}

.mint-duel-card__token-id {
  letter-spacing: 0.04em;
  color: rgba(255, 255, 255, 0.82);
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.92);
}

/* Holo foil shimmer */
.mint-duel-card__foil {
  position: absolute;
  inset: 0;
  z-index: 7;
  background: linear-gradient(
    135deg,
    transparent 30%,
    rgba(255, 255, 255, 0.06) 45%,
    rgba(255, 255, 255, 0.1) 50%,
    rgba(255, 255, 255, 0.06) 55%,
    transparent 70%
  );
  background-size: 200% 200%;
  animation: mint-holo-shift 4s ease-in-out infinite;
  mix-blend-mode: screen;
  opacity: 0.75;
  pointer-events: none;
}

@keyframes mint-holo-shift {
  0%   { background-position: -50% -50%; }
  50%  { background-position: 150% 150%; }
  100% { background-position: -50% -50%; }
}

/* Card placement / flip animations (reuse enhanced keyframes) */
.mint-duel-card--placed {
  animation: mint-cell-place 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.mint-duel-card--flipped {
  animation: mint-cell-flip 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hand variant: slightly taller aspect ratio */
.mint-duel-card--hand {
  aspect-ratio: 3 / 4;
}


/* ═══════════════════════════════════════════════════════════════════════════
   MINI-DUEL: CardMini "duel" variant — browser grid card with NFT art hero
   Aspect ratio 3/4, responsive sizing, hover lift effect.
   ═══════════════════════════════════════════════════════════════════════════ */

.card-mini-duel {
  width: 100%;
  aspect-ratio: 3 / 4;
  border-radius: 14px;
  overflow: hidden;
  position: relative;
}

/* Browser grid: slightly smaller glass panel & edges for mini cards */
.card-mini-duel .mint-duel-card__glass {
  padding: 2px 3px;
}
.card-mini-duel .mint-duel-card__edge-value {
  font-size: 10px;
  font-weight: 800;
}
.card-mini-duel .mint-duel-card__janken-glyph {
  font-size: 11px;
}
.card-mini-duel .mint-duel-card__token-id {
  font-size: 7px;
}

/* Hover lift with spring feel */
.card-mini-duel:hover {
  transform: translateY(-2px) scale(1.03);
  transition: transform var(--mint-motion-duration-md) var(--mint-motion-ease-pop);
}

.mint-share-actions {
  gap: 6px;
}

.mint-share-actions__row {
  gap: 8px;
}

.mint-share-actions__hint,
.mint-share-actions__ready {
  font-size: 11px;
  line-height: 1.35;
}

.mint-share-actions__hint {
  color: var(--mint-text-hint);
}

.mint-share-actions__ready {
  color: var(--mint-text-accent);
  font-weight: 700;
}

/* Deck preview: larger cards in 5-col grid */
.deck-preview-grid .card-mini-duel .mint-duel-card__glass {
  padding: 3px 4px;
}
.deck-preview-grid .card-mini-duel .mint-duel-card__edge-value {
  font-size: 11px;
}


/* ═══════════════════════════════════════════════════════════════════════════
   PREV-0501: CardPreviewPanel — Large card inspection popover
   ═══════════════════════════════════════════════════════════════════════════ */

.mint-preview-panel {
  position: fixed;
  z-index: 60;
  width: 220px;
  border-radius: 18px;
  background: rgba(15, 15, 30, 0.92);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(0, 0, 0, 0.2);
  padding: 12px;
  pointer-events: auto;
  animation: mint-preview-pop 0.15s ease-out;
}

@keyframes mint-preview-pop {
  from { opacity: 0; transform: scale(0.92); }
  to   { opacity: 1; transform: scale(1); }
}

.mint-preview-panel__card {
  width: 100%;
  aspect-ratio: 1;
  border-radius: 14px;
  overflow: hidden;
}

.mint-preview-panel__stats {
  margin-top: 10px;
  display: grid;
  gap: 4px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.8);
}

.mint-preview-panel__stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 2px 4px;
}

.mint-preview-panel__stat-label {
  color: rgba(255, 255, 255, 0.45);
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.mint-preview-panel__stat-value {
  font-weight: 700;
  font-family: var(--font-mono, monospace);
}

/* Reduced motion: skip pop animation */
@media (prefers-reduced-motion: reduce) {
  .mint-preview-panel { animation: none; }
}


/* ═══════════════════════════════════════════════════════════════════════════
   VFX Quality Tiers — [data-vfx] attribute on <html>  (P2-VFX-001 / 003)
   Set by visualSettings.ts via App.tsx.  Tiers: off | low | medium | high.
   ═══════════════════════════════════════════════════════════════════════════ */

/* ── OFF: No animations at all ──────────────────────────────────────── */
[data-vfx="off"] .mint-stage::after                 { display: none !important; }
[data-vfx="off"] .mint-compact-card::after           { animation: none !important; }
[data-vfx="off"] .mint-duel-card__foil               { animation: none !important; }
[data-vfx="off"] .mint-cell--selected                { animation: none !important; }
[data-vfx="off"] .mint-cell--placed                  { animation: none !important; }
[data-vfx="off"] .mint-cell--flipped                 { animation: none !important; }
[data-vfx="off"] .mint-duel-card--placed             { animation: none !important; }
[data-vfx="off"] .mint-duel-card--flipped            { animation: none !important; }
[data-vfx="off"] .mint-focus-hand-dock::after        { display: none !important; }
[data-vfx="off"] .mint-battle-hud::before,
[data-vfx="off"] .mint-battle-hud::after             { display: none !important; }
[data-vfx="off"] .mint-battle-hud__progress-fill::after { animation: none !important; }
[data-vfx="off"] .mint-nyano-reaction__burst-banner  { animation: none !important; }
[data-vfx="off"] .mint-stage--impact-burst           { animation: none !important; filter: none !important; }
[data-vfx="off"] .mint-stage--impact-burst .mint-stage__holo,
[data-vfx="off"] .mint-stage--impact-burst .mint-stage__glow,
[data-vfx="off"] .mint-stage--impact-burst .mint-stage__board > * {
  animation: none !important;
}

/* ── LOW: Minimal — no foil/sparkle, shortened placement ────────────── */
[data-vfx="low"] .mint-stage::after                  { display: none !important; }
[data-vfx="low"] .mint-compact-card::after            { animation: none !important; }
[data-vfx="low"] .mint-duel-card__foil                { animation: none !important; }
[data-vfx="low"] .mint-cell--selected                 { animation: none !important; }
[data-vfx="low"] .mint-cell--placed                   { animation-duration: 0.25s !important; }
[data-vfx="low"] .mint-cell--flipped                  { animation-duration: 0.25s !important; }
[data-vfx="low"] .mint-duel-card--placed              { animation-duration: 0.25s !important; }
[data-vfx="low"] .mint-duel-card--flipped             { animation-duration: 0.3s !important; }
[data-vfx="low"] .mint-focus-hand-dock::after         { animation-duration: 22s !important; opacity: 0.22; }
[data-vfx="low"] .mint-battle-hud::before             { animation-duration: 16s !important; opacity: 0.2; }
[data-vfx="low"] .mint-battle-hud::after              { opacity: 0.2; }
[data-vfx="low"] .mint-battle-hud__progress-fill::after { animation-duration: 5s !important; opacity: 0.26; }
[data-vfx="low"] .mint-nyano-reaction__burst-banner   { animation-duration: 420ms !important; }
[data-vfx="low"] .mint-stage--impact-burst            { animation-duration: 280ms !important; }
[data-vfx="low"] .mint-stage--impact-burst .mint-stage__holo,
[data-vfx="low"] .mint-stage--impact-burst .mint-stage__glow,
[data-vfx="low"] .mint-stage--impact-burst .mint-stage__board > * {
  animation: none !important;
}

/* ── MEDIUM: Standard — sparkle hidden, slower foils/glow ───────────── */
[data-vfx="medium"] .mint-stage::after               { display: none !important; }
[data-vfx="medium"] .mint-compact-card::after         { animation-duration: 12s !important; }
[data-vfx="medium"] .mint-duel-card__foil             { animation-duration: 6s !important; }
[data-vfx="medium"] .mint-cell--selected              { animation-duration: 3s !important; }
[data-vfx="medium"] .mint-stage--impact-burst         { animation-duration: 520ms !important; }

/* ── HIGH: Full effects (current defaults). Sparkle re-enabled ──────── */
/* No overrides needed — HIGH matches the existing defaults.
   Sparkle drift (12s), compact foil (8s), duel foil (4s), glow pulse (2s). */
